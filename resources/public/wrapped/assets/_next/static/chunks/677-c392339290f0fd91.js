(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{3677:(e,t,n)=>{Promise.resolve().then(n.bind(n,9356))},5624:e=>{e.exports={shine:"FlipCard_shine__AcOgh",shineAfter:"FlipCard_shineAfter__tJgY_",glare:"FlipCard_glare__Z5hdw"}},9356:(e,t,n)=>{"use strict";n.d(t,{A:()=>e1,default:()=>e4});var r=n(1908);n(5873);var a=n(5284),i=n(2021),l=n(9904),o=n(3864),s=n(6071),u=n(8753),d=n(6346),c=n(3485),h=n(4142);function m(e,t){return e.runner.username===t?e.corp.username?"runner":null:e.corp.username===t&&e.runner.username?"corp":null}function g(e,t,n){let r=e.filter(e=>null!==e.winner&&m(e,t)===n);if(!r.length)return null;let a=r.reduce((e,t)=>e+ +(t.winner===n),0),i=r.length;return{role:n,wins:a,losses:i-a,total:i,winRate:i?a/i:0}}function p(e,t,n){let r=new Map;for(let l of e){var a,i;if(m(l,t)!==n||null===l.winner)continue;let e=null!==(a=l[n].identity)&&void 0!==a?a:"Unknown Identity",o=null!==(i=r.get(e))&&void 0!==i?i:{wins:0,total:0};o.total+=1,l.winner===n&&(o.wins+=1),r.set(e,o)}let l=null;for(let[e,t]of Array.from(r.entries()))(!l||t.total>l.total||t.total===l.total&&t.wins>l.wins)&&(l={identity:e,wins:t.wins,total:t.total});if(!l)return null;let o=l.total-l.wins;return{role:n,identity:l.identity,games:l.total,wins:l.wins,losses:o,winRate:l.total?l.wins/l.total:0}}function y(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=new Map;for(let r of e){var i,l;if(m(r,t)!==n||null===r.winner)continue;let e=null!==(i=r[n].identity)&&void 0!==i?i:"Unknown Identity",o=null!==(l=a.get(e))&&void 0!==l?l:{wins:0,total:0};o.total+=1,r.winner===n&&(o.wins+=1),a.set(e,o)}return Array.from(a.entries()).sort((e,t)=>t[1].total!==e[1].total?t[1].total-e[1].total:t[1].wins-e[1].wins).slice(0,r).map(e=>{let[t,r]=e;return{role:n,identity:t,games:r.total,wins:r.wins,losses:r.total-r.wins,winRate:r.total?r.wins/r.total:0}})}function f(e,t){let n=new Set;for(let r of e)r.completedAt&&m(r,t)&&n.add(v(r.completedAt));return Array.from(n).map(e=>(0,l.qg)(e,"yyyy-MM-dd",new Date)).sort((e,t)=>e.getTime()-t.getTime())}function v(e){return(0,s.GP)((0,h.o)(e),"yyyy-MM-dd")}function x(e){if(!e||"object"!=typeof e)return{username:null,identity:null,emailHash:null};let t=e.player,n=t&&"object"==typeof t&&"string"==typeof t.username?t.username:null,r=t&&"object"==typeof t&&"string"==typeof t.emailhash?t.emailhash:null;return{username:n,identity:"string"==typeof e.identity?e.identity:null,emailHash:r}}function w(e){if("string"!=typeof e)return null;let t=Date.parse(e);return Number.isNaN(t)?null:new Date(t)}function b(e,t){var n,r,a,i,l,o,s,u,d,c,h,m,g;return{clicksGained:S(null==e?void 0:null===(n=e.gain)||void 0===n?void 0:n.click),creditsGained:S(null==e?void 0:null===(r=e.gain)||void 0===r?void 0:r.credit),creditsSpent:S(null==e?void 0:null===(a=e.spent)||void 0===a?void 0:a.credit),creditsFromClicks:S(null==e?void 0:null===(i=e.click)||void 0===i?void 0:i.credit),cardsDrawn:S(null==e?void 0:null===(l=e.gain)||void 0===l?void 0:l.card),cardsFromClicks:S(null==e?void 0:null===(o=e.click)||void 0===o?void 0:o.draw),shuffleCount:S(null==e?void 0:e["shuffle-count"]),cardsPlayed:S(null==e?void 0:null===(s=e["cards-played"])||void 0===s?void 0:s["play-instant"]),cardsRezzed:t?S(null==e?void 0:null===(u=e.cards)||void 0===u?void 0:u.rezzed):null,runsStarted:S(null==e?void 0:null===(d=e.runs)||void 0===d?void 0:d.started),cardsAccessed:S(null==e?void 0:null===(c=e.access)||void 0===c?void 0:c.cards),damageDone:S(null==e?void 0:null===(h=e.damage)||void 0===h?void 0:h.all),tagsGained:t?null:S(null==e?void 0:null===(g=e.gain)||void 0===g?void 0:null===(m=g.tag)||void 0===m?void 0:m.base)}}function S(e){if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){let t=Number(e);if(Number.isFinite(t))return t}return null}function C(e,t,n,r){let a=null;for(let i of e){let e=m(i,t);if(!e)continue;let l=n("runner"===e?i.runnerStats:i.corpStats,i,e);!(null===l||Number.isNaN(l))&&(!a||r(l,a.value))&&(a={value:l,game:i,role:e})}return a?function(e,t,n){let r=e[t],a=e["runner"===t?"corp":"runner"],i="draw";return e.winner===t?i="win":e.winner&&e.winner!==t&&(i="loss"),{role:t,value:n,identity:r.identity,opponent:a.username,opponentIdentity:a.identity,completedAt:e.completedAt,turnCount:e.turnCount,result:i,reason:e.reason,replayUrl:e.replayUrl}}(a.game,a.role,a.value):null}function k(e){let t=e.trim();return t.length?t:"Unknown"}function A(e){let t=e.trim().toLowerCase();return"concede"===t||"conceded"===t}var M=n(5341),j=n(7816),N=n(6712),E=n(2902),B=n(3818),P=n(1693),T=n(3073),R=n(5620);function z(e){let{children:t,gradient:n,initialGradient:a,showGradient:i=!0,align:l="center"}=e;return void 0===a?(0,r.jsx)("section",{style:{position:"relative",minHeight:"100vh",padding:"5rem 1rem",display:"flex",alignItems:"center"===l?"center":"flex-start",justifyContent:"center",background:null!=n?n:"transparent",scrollSnapAlign:"start",scrollSnapStop:"always",color:"var(--mantine-color-gray-2)"},children:(0,r.jsx)(R.P.div,{style:{width:"100%",maxWidth:960},initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.45,ease:"easeOut"},viewport:{once:!0,amount:.4},children:(0,r.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.75,delay:.2},children:t})})}):(0,r.jsxs)("section",{style:{position:"relative",minHeight:"100vh",padding:"5rem 1rem",display:"flex",alignItems:"center"===l?"center":"flex-start",justifyContent:"center",scrollSnapAlign:"start",scrollSnapStop:"always",color:"var(--mantine-color-gray-2)",overflow:"hidden"},children:[(0,r.jsx)("div",{style:{position:"absolute",inset:0,background:a,zIndex:0}}),(0,r.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:+!!i},transition:{duration:.8,ease:"easeInOut"},style:{position:"absolute",inset:0,background:n,zIndex:1}}),(0,r.jsx)(R.P.div,{style:{width:"100%",maxWidth:960,position:"relative",zIndex:2},initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.45,ease:"easeOut"},viewport:{once:!0,amount:.4},children:(0,r.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.75,delay:.2},children:t})})]})}var D=n(4099),H=n(6212),I=n(7963),F=n(9168),W=n(4509);function L(e){let{stats:t,width:n="400px",slideSize:a="300px"}=e,i=(0,N.useRef)((0,I.A)()),l=(0,N.useRef)((0,H.A)({delay:5e3,playOnInit:!1,stopOnInteraction:!1,stopOnMouseEnter:!1})),o=(0,N.useRef)(null),[s,u]=(0,N.useState)(null),[d,c]=(0,N.useState)(!1),h=(0,N.useMemo)(()=>t.map(e=>(0,r.jsx)(D.F.Slide,{children:(0,r.jsx)(F.t,{withBorder:!0,radius:"lg",p:"xl",h:"100%",style:{background:"rgba(7, 6, 19, 0.75)"},children:(0,r.jsxs)(E.B,{align:"center",gap:"xs",children:[(0,r.jsx)(B.E,{fw:700,c:"gray.0",ta:"center",style:{fontSize:"2.5rem",lineHeight:1.1},children:e.value}),(0,r.jsx)(B.E,{size:"sm",c:"gray.5",fw:600,style:{letterSpacing:1,textAlign:"center"},children:e.label})]})})},e.label)),[t]);(0,N.useEffect)(()=>{let e=o.current;if(!e)return;let t=new IntersectionObserver(e=>{var t,n;let[r]=e;r&&(r.isIntersecting?null===(t=l.current)||void 0===t||t.play():null===(n=l.current)||void 0===n||n.stop())},{threshold:.4});return t.observe(e),()=>t.disconnect()},[]);let m=(0,N.useCallback)(e=>{e.slideNodes().forEach((t,n)=>{t.style.transition||(t.style.transition="opacity 250ms ease"),t.style.opacity=n===e.selectedScrollSnap()?"1":"0.5"})},[]);(0,N.useEffect)(()=>{if(!s)return;let e=()=>m(s);return e(),s.on("select",e),s.on("scroll",e),s.on("reInit",e),()=>{s.off("select",e),s.off("scroll",e),s.off("reInit",e)}},[s,m]);let g=(0,N.useCallback)(e=>{u(e)},[]);return(0,r.jsx)(W.a,{w:n,ref:o,children:(0,r.jsx)(D.F,{withControls:!0,slideSize:a,slideGap:"lg",emblaOptions:{loop:!0,align:"center"},plugins:[i.current,l.current],onMouseEnter:()=>{var e;c(!0),null===(e=l.current)||void 0===e||e.stop()},onMouseLeave:()=>{var e;c(!1),null===(e=l.current)||void 0===e||e.play()},getEmblaApi:g,styles:{controls:{opacity:+!!d,transition:"opacity 150ms ease",pointerEvents:d?"auto":"none"}},children:h})})}var G=n(3939),O=n(5957),J=n(7983),_=n(5624),U=n.n(_);let Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return Math.min(Math.max(e,t),n)},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e.toFixed(t))},K=(e,t,n,r,a)=>V(r+(a-r)*(e-t)/(n-t)),q={stiffness:300,damping:30};function X(e){let{imageSrc:t,width:n=320,height:a=450,title:i="Tap to reveal",subtitle:l="Hover or tap to flip this card",coverContent:o,className:s,coverMask:u,onFlip:d}=e,c=(0,N.useRef)(null),h=(0,N.useRef)(!1),m=(0,N.useCallback)(()=>{h.current=!h.current,c.current&&(c.current.style.transform=h.current?"rotateY(180deg)":"rotateY(0deg)"),null==d||d(h.current)},[d]),g=(0,O.z)(0,q),p=(0,O.z)(0,q),y=(0,O.z)(50,q),f=(0,O.z)(50,q),v=(0,O.z)(0,q),x=(0,O.z)(50,q),w=(0,O.z)(50,q),b=(0,J.G)([x,w],e=>{let[t,n]=e;return"0% ".concat(n,"%, ").concat(t,"% ").concat(n,"%, ").concat(t,"% ").concat(n,"%")}),S=(0,J.G)([x,w],e=>{let[t,n]=e;return"0% ".concat(n,"%, ").concat(100-Number(t),"% ").concat(100-Number(n),"%, ").concat(t,"% ").concat(n,"%")}),C=(0,J.G)(y,e=>"".concat(e,"%")),k=(0,J.G)(f,e=>"".concat(e,"%")),A=(0,J.G)(v,e=>.6*e),M=(0,J.G)(v,e=>.4*e),j=(0,J.G)(v,e=>.3*e);return(0,r.jsx)("div",{className:s,style:{width:n,height:a,perspective:"1200px",cursor:"pointer"},onClick:m,onPointerMove:e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,a=Y(V(100/t.width*n)),i=Y(V(100/t.height*r)),l=a-50,o=i-50;g.set(V(-(l/3.5))),p.set(V(o/2)),y.set(a),f.set(i),v.set(1),x.set(K(a,0,100,37,63)),w.set(K(i,0,100,33,67))},onPointerLeave:()=>{g.set(0),p.set(0),y.set(50),f.set(50),v.set(0),x.set(50),w.set(50)},children:(0,r.jsx)(R.P.div,{style:{width:"100%",height:"100%",transformStyle:"preserve-3d",rotateX:p,rotateY:g},children:(0,r.jsxs)("div",{ref:c,style:{position:"relative",width:"100%",height:"100%",transition:"transform 700ms cubic-bezier(0.22, 1, 0.36, 1)",transformStyle:"preserve-3d",transform:"rotateY(0deg)"},children:[(0,r.jsxs)("div",{style:{position:"absolute",inset:0,borderRadius:"4.19%/3%",overflow:"hidden",background:"#2f2f2f",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:o?0:"2rem",textAlign:"center",backfaceVisibility:"hidden",boxShadow:"0 15px 40px rgba(5, 3, 20, 0.5)",border:"1px solid rgba(255,255,255,0.1)",isolation:"isolate"},children:[o||(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{style:{fontSize:"1.5rem",fontWeight:700},children:i}),l&&(0,r.jsx)("span",{style:{marginTop:"0.5rem",fontSize:"0.95rem",opacity:.75},children:l})]}),u&&(0,r.jsx)(R.P.div,{className:U().shine,style:{opacity:A,backgroundPosition:b,"--pointer-x":C,"--pointer-y":k,WebkitMaskImage:"url(".concat(u,")"),maskImage:"url(".concat(u,")"),WebkitMaskSize:"cover",maskSize:"cover",WebkitMaskPosition:"center",maskPosition:"center"}})]}),(0,r.jsxs)("div",{style:{position:"absolute",inset:0,borderRadius:"4.19%/3%",backfaceVisibility:"hidden",transform:"rotateY(180deg)",boxShadow:"0 15px 40px rgba(5, 3, 20, 0.5)",isolation:"isolate"},children:[(0,r.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:18,overflow:"hidden"},children:(0,r.jsx)("img",{src:t,alt:"Favorite identity",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),(0,r.jsx)(R.P.div,{className:U().shine,style:{opacity:A,backgroundPosition:b,"--pointer-x":C,"--pointer-y":k}}),(0,r.jsx)(R.P.div,{className:U().shineAfter,style:{opacity:M,backgroundPosition:S,"--pointer-x":C,"--pointer-y":k}}),(0,r.jsx)(R.P.div,{className:U().glare,style:{opacity:j,"--pointer-x":C,"--pointer-y":k}})]})]})})})}function Z(e){let{imageSrc:t,cardTitle:n,cardSubtitle:a,coverContent:i,coverMask:l,children:o,onFlip:s}=e,[u,d]=(0,N.useState)(!1);return(0,r.jsxs)("div",{style:{display:"contents"},children:[(0,r.jsx)("div",{style:{position:"relative",zIndex:1},children:(0,r.jsx)(X,{imageSrc:t,width:320,height:450,title:n,subtitle:a,coverContent:i,coverMask:l,onFlip:e=>{d(e),null==s||s(e)}})}),(0,r.jsx)(R.P.div,{initial:{opacity:0,y:-20},animate:{opacity:+!!u,y:u?0:-20},transition:{duration:.4,ease:"easeOut"},style:{width:"100%",maxWidth:320,position:"relative",zIndex:0},children:o})]})}let Q=(0,N.memo)(function(e){let{initialGradient:t,gradient:n,title:a,cardTitle:i,cardSubtitle:l,imageSrc:o,coverContent:s,coverMask:u,revealTitle:d,revealSubtitle:c}=e,[h,m]=(0,N.useState)(!1),[g,p]=(0,N.useState)(!1),[y,f]=(0,N.useState)(!1),v=(0,N.useRef)(null),x=(0,G.W)(v,{amount:.5}),w=(0,N.useCallback)(e=>{m(e),g||(p(!0),f(!1))},[g]);return(0,N.useEffect)(()=>{if(!x||g)return;let e=setTimeout(()=>{g||f(!0)},5e3);return()=>clearTimeout(e)},[x,g]),(0,r.jsx)("div",{ref:v,children:(0,r.jsx)(z,{initialGradient:t,gradient:n,showGradient:h,children:(0,r.jsxs)(E.B,{align:"center",gap:"lg",children:[(0,r.jsx)(P.h,{order:2,children:a}),(0,r.jsx)(Z,{imageSrc:o,cardTitle:i,cardSubtitle:l,coverContent:s,coverMask:u,onFlip:w,children:(0,r.jsxs)(E.B,{align:"center",gap:"xs",children:[(0,r.jsx)(P.h,{order:2,fw:700,children:d}),(0,r.jsx)(P.h,{order:4,c:"gray.5",children:c})]})}),(0,r.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:y&&!g?1:0},transition:{duration:.5},style:{marginTop:-16},children:(0,r.jsx)(B.E,{size:"md",c:"gray.6",ta:"center",children:"Click the card to reveal"})})]})})})});function $(){return(0,r.jsxs)("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"hidden",borderRadius:18,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1.5rem"},children:[[{name:"Anarch",color:"#FF6B00",src:"/wrapped/assets/icons/NSG_ANARCH.svg"},{name:"Criminal",color:"#44A8FF",src:"/wrapped/assets/icons/NSG_CRIMINAL.svg"},{name:"Shaper",color:"#1ECB8A",src:"/wrapped/assets/icons/NSG_SHAPER.svg"}].map(e=>(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:(0,r.jsx)("img",{src:e.src,alt:"".concat(e.name," symbol"),style:{width:72,height:72,objectFit:"contain"}})},e.name)),(0,r.jsx)("div",{style:{position:"absolute",inset:0,pointerEvents:"none",borderRadius:18}})]})}let ee=null;async function et(){if(ee)return ee;try{let e=await fetch("https://api.netrunnerdb.com/api/v3/public/cards?filter[search]=card_type:runner_identity|corp_identity");if(!e.ok)throw Error("API request failed: ".concat(e.status));let t=await e.json(),n={};for(let e of t.data)n[e.attributes.title]=function(e){let{printing_ids:t,printings_released_by:n,card_set_ids:r,latest_printing_id:a}=e.attributes,i=n.includes("null_signal_games"),l=r.includes("system_update_2021")||r.includes("system_core_2019"),o=a;if(i){let e=n.indexOf("null_signal_games");if(-1!==e&&t[e]&&(o=t[e]),l){let e=t.reduce((e,t)=>t>e?t:e);return"https://printing.sneakdoorbeta.net/zhCN/large/".concat(e,".webp")}return"https://printing.sneakdoorbeta.net/zhCN/xlarge/".concat(o,".webp")}return"https://printing.sneakdoorbeta.net/zhCN/large/".concat(o,".webp")}(e);return ee=n,n}catch(e){return console.error("Failed to fetch identity images:",e),{}}}function en(e){return e.replace(/[\u201C\u201D\u201E\u201F\u2033\u2036]/g,'"').replace(/[\u2018\u2019\u201A\u201B\u2032\u2035]/g,"'").toLowerCase()}let er="<Missing ID>",ea={"419: Amoral Scammer":"419","A Teia: IP Recovery":"A Teia","Acme Consulting: The Truth You Need":"Acme","AgInfusion: New Miracles for a New World":"AgInfusion","Akiko Nisei: Head Case":"Akiko","Alice Merchant: Clan Agitator":"Alice","Amp\xe8re: Cybernetics For Anyone":"Amp\xe8re","Ampere: Cybernetics For Anyone":"Amp\xe8re","Arissana Rocha Nahu: Street Artist":"Arissana","Asa Group: Security Through Vigilance":"Asa",'Ayla "Bios" Rahim: Simulant Specialist':"Ayla","Ayla “Bios” Rahim: Simulant Specialist":"Ayla","Az McCaffrey: Mechanical Prodigy":"Az","Azmari EdTech: Shaping the Future":"Azmari","Captain Padma Isbister: Intrepid Explorer":"Padma","Earth Station: SEA Headquarters":"Earth Station","Epiphany Analytica: Nations Undivided":"Epiphany","Es\xe2 Afontov: Eco-Insurrectionist":"Es\xe2","Esa Afontov: Eco-Insurrectionist":"Es\xe2","Freedom Khumalo: Crypto-Anarchist":"Freedom","GameNET: Where Dreams are Real":"GameNET","Haas-Bioroid: Architects of Tomorrow":"AoT","Haas-Bioroid: Precision Design":"PD","Hoshiko Shiro: Untold Protagonist":"Hosh","Hyoubu Institute: Absolute Clarity":"Hyoubu","Issuaq Adaptics: Sustaining Diversity":"Issuaq","Jemison Astronautics: Sacrifice. Audacity. Success.":"Jemison","Jinteki: Personal Evolution":"PE","Jinteki: Restoring Humanity":"RH","Kabonesa Wu: Netspace Thrillseeker":"Kabonesa",'Ken "Express" Tenma: Disappeared Clone':"Ken","Ken “Express” Tenma: Disappeared Clone":"Ken","Lat: Ethical Freelancer":"Lat","Liza Talking Thunder: Prominent Legislator":"Liza","Los: Data Hijacker":"Los","Mercury: Chrome Libertador":"Mercury","MirrorMorph: Endless Iteration":"MirrorMorph","Mti Mwekundu: Life Improved":"Mti",'Nathaniel "Gnat" Hall: One-of-a-Kind':"Gnat","NBN: Reality Plus":"R+","Near-Earth Hub: Broadcast Center":"NEH","Nova Initiumia: Catalyst & Impetus":"Nova","Nuvem SA: Law of the Land":"Nuvem",'Nyusha "Sable" Sintashta: Symphonic Prodigy':"Sable","Ob Superheavy Logistics: Extract. Export. Excel.":"Ob","Pravdivost Consulting: Political Solutions":"Pravdivost","Quetzal: Free Spirit":"Quetzal","Reina Roja: Freedom Fighter":"Reina",'Ren\xe9 "Loup" Arcemont: Party Animal':"Loup",'Rene "Loup" Arcemont: Party Animal':"Loup","Ren\xe9 “Loup” Arcemont: Party Animal":"Loup","Rielle “Kit” Peddler: Transhuman":"Kit",'Rielle "Kit" Peddler: Transhuman':"Kit","Saraswati Mnemonics: Endless Exploration":"Saraswati","Sebasti\xe3o Souza Pessoa: Activist Organizer":"Seb","Sebastiao Souza Pessoa: Activist Organizer":"Seb","Sportsmetal: Go Big or Go Home":"Sportsmetal","SSO Industries: Fueling Innovation":"SSO","Steve Cambridge: Master Grifter":"Steve","Tāo Salonga: Telepresence Magician":"Tāo","Tao Salonga: Telepresence Magician":"Tāo","The Outfit: Family Owned and Operated":"Outfit","Thule Subsea: Safety Below":"Thule","Thunderbolt Armaments: Peace Through Power":"Thunderbolt","Weyland Consortium: Building a Better World":"BABW","Weyland Consortium: Built to Last":"BtL","Zahya Sadeghi: Versatile Smuggler":"Zahya","Ryō “Phoenix” Ōno: Out of the Ashes":"Phoenix","Ryo “Phoenix” Ono: Out of the Ashes":"Phoenix",'Ryō "Phoenix" Ōno: Out of the Ashes':"Phoenix",'Ryo "Phoenix" Ono: Out of the Ashes':"Phoenix","Topan: Ormas Leader":"Topan",'Barry "Baz" Wong: Tri-Maf Veteran':"Baz","Barry “Baz” Wong: Tri-Maf Veteran":"Baz","MuslihaT: Multifarious Marketeer":"MuslihaT","Dewi Subrotoputri: Pedagogical Dhalang":"Dewi","Magdalene Keino-Chemutai: Cryptarchitect":"Mag","LEO Construction: Labor Solutions":"LEO","Po\xe9tr\xef Luxury Brands: All the Rage":"Po\xe9tr\xef","Poetri Luxury Brands: All the Rage":"Po\xe9tr\xef","AU Co.: The Gold Standard in Clones":"AU Co","PT Untaian: Life's Building Blocks":"PTU","Nebula Talent Management: Making Stars":"Nebula","Synapse Global: Faster than Thought":"Synapse","BANGUN: When Disaster Strikes":"Bangun","The Zwicky Group: Invisible Hands":"Zwicky","The Catalyst: Convention Breaker":"Catalyst","The Syndicate: Profit over Principle":"Syndicate"},ei={419:"Criminal","A Teia":"Jinteki",Acme:"NBN",AgInfusion:"Jinteki",Akiko:"Shaper",Alice:"Anarch",Ampère:"_Neutral",Arissana:"Shaper",Asa:"HB",Ayla:"Shaper",Az:"Criminal",Azmari:"NBN",Padma:"Shaper","Earth Station":"Weyland",Epiphany:"NBN",Esâ:"Anarch",Freedom:"Anarch",GameNET:"NBN",AoT:"HB",PD:"HB",Hosh:"Anarch",Hyoubu:"Jinteki",Issuaq:"Jinteki",Jemison:"Weyland",PE:"Jinteki",RH:"Jinteki",Kabonesa:"Shaper",Ken:"Criminal",Lat:"Shaper",Liza:"Criminal",Los:"Criminal",Mercury:"Criminal",MirrorMorph:"HB",Mti:"Jinteki",Gnat:"Anarch","R+":"NBN",NEH:"NBN",Nova:"_Neutral",Nuvem:"Weyland",Sable:"Criminal",Ob:"Weyland",Pravdivost:"NBN",Quetzal:"Anarch",Reina:"Anarch",Loup:"Anarch",Kit:"Shaper",Saraswati:"Jinteki",Seb:"Anarch",Sportsmetal:"HB",SSO:"Weyland",Steve:"Criminal",Tāo:"Shaper",Outfit:"Weyland",Thule:"HB",Thunderbolt:"HB",BABW:"Weyland",BtL:"Weyland",Zahya:"Criminal",[er]:"_Neutral",Phoenix:"Anarch",Topan:"Anarch",Baz:"Criminal",MuslihaT:"Criminal",Dewi:"Shaper",Mag:"Shaper",LEO:"HB",Poétrï:"HB","AU Co":"Jinteki",PTU:"Jinteki",Nebula:"NBN",Synapse:"NBN",Bangun:"Weyland",Zwicky:"Weyland",Catalyst:"_Neutral",Syndicate:"_Neutral"},el={"419: Amoral Scammer":"Criminal","A Teia: IP Recovery":"Jinteki","Acme Consulting: The Truth You Need":"NBN","Adam: Compulsive Hacker":"Adam","AgInfusion: New Miracles for a New World":"Jinteki","Akiko Nisei: Head Case":"Shaper","Alice Merchant: Clan Agitator":"Anarch","Amp\xe8re: Cybernetics For Anyone":"_Neutral","Andromeda: Dispossessed Ristie":"Criminal","Apex: Invasive Predator":"Apex","Argus Security: Protection Guaranteed":"Weyland","Arissana Rocha Nahu: Street Artist":"Shaper",'Armand "Geist" Walker: Tech Lord':"Criminal","Asa Group: Security Through Vigilance":"HB","AU Co.: The Gold Standard in Clones":"Jinteki",'Ayla "Bios" Rahim: Simulant Specialist':"Shaper","Az McCaffrey: Mechanical Prodigy":"Criminal","Azmari EdTech: Shaping the Future":"NBN","BANGUN: When Disaster Strikes":"Weyland",'Barry "Baz" Wong: Tri-Maf Veteran':"Criminal","Blue Sun: Powering the Future":"Weyland",'Boris "Syfr" Kovac: Crafty Veteran':"Criminal","Captain Padma Isbister: Intrepid Explorer":"Shaper","Cerebral Imaging: Infinite Frontiers":"HB","Chaos Theory: W\xfcnderkind":"Shaper","Chronos Protocol: Selective Mind-mapping":"Jinteki","Custom Biotics: Engineered for Success":"HB","Cyber Bureau: Keeping the Peace":"_Neutral","Cybernetics Division: Humanity Upgraded":"HB","Dewi Subrotoputri: Pedagogical Dhalang":"Shaper","Earth Station: SEA Headquarters":"Weyland","Edward Kim: Humanity's Hammer":"Anarch",'Ele "Smoke" Scovak: Cynosure of the Net':"Shaper","Epiphany Analytica: Nations Undivided":"NBN","Es\xe2 Afontov: Eco-Insurrectionist":"Anarch","Exile: Streethawk":"Shaper","Freedom Khumalo: Crypto-Anarchist":"Anarch","Fringe Applications: Tomorrow, Today":"Weyland","Gabriel Santiago: Consummate Professional":"Criminal","Gagarin Deep Space: Expanding the Horizon":"Weyland","GameNET: Where Dreams are Real":"NBN","GRNDL: Power Unleashed":"Weyland","Haarpsichord Studios: Entertainment Unleashed":"NBN","Haas-Bioroid: Architects of Tomorrow":"HB","Haas-Bioroid: Engineering the Future":"HB","Haas-Bioroid: Precision Design":"HB","Haas-Bioroid: Stronger Together":"HB","Harishchandra Ent.: Where You're the Star":"NBN","Harmony Medtech: Biomedical Pioneer":"Jinteki","Hayley Kaplan: Universal Scholar":"Shaper","Hoshiko Shiro: Untold Protagonist":"Anarch","Hyoubu Institute: Absolute Clarity":"Jinteki","Iain Stirling: Retired Spook":"Criminal","Industrial Genomics: Growing Solutions":"Jinteki","Information Dynamics: All You Need To Know":"NBN","Issuaq Adaptics: Sustaining Diversity":"Jinteki",'Jamie "Bzzz" Micken: Techno Savant':"Shaper","Jemison Astronautics: Sacrifice. Audacity. Success.":"Weyland","Jesminder Sareen: Girl Behind the Curtain":"Shaper","Jinteki Biotech: Life Imagined":"Jinteki","Jinteki: Personal Evolution":"Jinteki","Jinteki: Potential Unleashed":"Jinteki","Jinteki: Replicating Perfection":"Jinteki","Jinteki: Restoring Humanity":"Jinteki","Kabonesa Wu: Netspace Thrillseeker":"Shaper",'Kate "Mac" McCaffrey: Digital Tinker':"Shaper",'Ken "Express" Tenma: Disappeared Clone':"Criminal","Khan: Savvy Skiptracer":"Criminal","Laramy Fisk: Savvy Investor":"Criminal","Lat: Ethical Freelancer":"Shaper","Leela Patel: Trained Pragmatist":"Criminal","LEO Construction: Labor Solutions":"HB","Liza Talking Thunder: Prominent Legislator":"Criminal","Los: Data Hijacker":"Criminal","Magdalene Keino-Chemutai: Cryptarchitect":"Shaper","MaxX: Maximum Punk Rock":"Anarch","Mercury: Chrome Libertador":"Criminal","MirrorMorph: Endless Iteration":"HB","Mti Mwekundu: Life Improved":"Jinteki","MuslihaT: Multifarious Marketeer":"Criminal","Nasir Meidan: Cyber Explorer":"Shaper",'Nathaniel "Gnat" Hall: One-of-a-Kind':"Anarch","NBN: Controlling the Message":"NBN","NBN: Making News":"NBN","NBN: Reality Plus":"NBN","NBN: The World is Yours*":"NBN","Near-Earth Hub: Broadcast Center":"NBN","Nebula Talent Management: Making Stars":"NBN","Nero Severn: Information Broker":"Criminal","New Angeles Sol: Your News":"NBN","NEXT Design: Guarding the Net":"HB","Nisei Division: The Next Generation":"Jinteki","Noise: Hacker Extraordinaire":"Anarch","Nova Initiumia: Catalyst & Impetus":"_Neutral","Null: Whistleblower":"Anarch","Nuvem SA: Law of the Land":"Weyland",'Nyusha "Sable" Sintashta: Symphonic Prodigy':"Criminal","Ob Superheavy Logistics: Extract. Export. Excel.":"Weyland","Omar Keung: Conspiracy Theorist":"Anarch","Pālanā Foods: Sustainable Growth":"Jinteki","Po\xe9tr\xef Luxury Brands: All the Rage":"HB","Pravdivost Consulting: Political Solutions":"NBN","PT Untaian: Life's Building Blocks":"Jinteki","Quetzal: Free Spirit":"Anarch","Reina Roja: Freedom Fighter":"Anarch",'Ren\xe9 "Loup" Arcemont: Party Animal':"Anarch",'Rielle "Kit" Peddler: Transhuman':"Shaper",'Ryō "Phoenix" Ōno: Out of the Ashes':"Anarch","Saraswati Mnemonics: Endless Exploration":"Jinteki","Sebasti\xe3o Souza Pessoa: Activist Organizer":"Anarch","Seidr Laboratories: Destiny Defined":"HB","Silhouette: Stealth Operative":"Criminal","Skorpios Defense Systems: Persuasive Power":"Weyland","Spark Agency: Worldswide Reach":"NBN","Sportsmetal: Go Big or Go Home":"HB","SSO Industries: Fueling Innovation":"Weyland","Steve Cambridge: Master Grifter":"Criminal","Strategic Innovations: Future Forward":"HB","Sunny Lebeau: Security Specialist":"Sunny","Synapse Global: Faster than Thought":"NBN","SYNC: Everything, Everywhere":"NBN","Synthetic Systems: The World Re-imagined":"Jinteki","Tāo Salonga: Telepresence Magician":"Shaper","Tennin Institute: The Secrets Within":"Jinteki","The Catalyst: Convention Breaker":"_Neutral","The Foundry: Refining the Process":"HB","The Masque: Cyber General":"_Neutral","The Outfit: Family Owned and Operated":"Weyland","The Professor: Keeper of Knowledge":"Shaper","The Shadow: Pulling the Strings":"_Neutral","The Syndicate: Profit over Principle":"_Neutral","The Zwicky Group: Invisible Hands":"Weyland","Thule Subsea: Safety Below":"HB","Thunderbolt Armaments: Peace Through Power":"HB","Titan Transnational: Investing In Your Future":"Weyland","Topan: Ormas Leader":"Anarch","Valencia Estevez: The Angel of Cayambe":"Anarch","Weyland Consortium: Because We Built It":"Weyland","Weyland Consortium: Builder of Nations":"Weyland","Weyland Consortium: Building a Better World":"Weyland","Weyland Consortium: Built to Last":"Weyland","Whizzard: Master Gamer":"Anarch","Wyvern: Chemically Enhanced":"Anarch","Zahya Sadeghi: Versatile Smuggler":"Criminal"},eo=["Anarch","Criminal","Shaper","HB","Jinteki","NBN","Weyland","_Neutral"],es={Anarch:"#d9693f",Criminal:"#3862df",Shaper:"#60a260",HB:"#8854b9",Jinteki:"#b14157",NBN:"#FFDE00",Weyland:"#2d5a2d",Adam:"#a89c33",Sunny:"#c8c2bc",Apex:"#c8c2bc",_Neutral:"gray"},eu=e=>{var t;return null==e||""===e?er:null!==(t=ea[e])&&void 0!==t?t:e},ed=e=>{var t;return null==e?"_Neutral":e in el?el[e]:null!==(t=ei[e])&&void 0!==t?t:e},ec=e=>{var t;return null==e?"":null!==(t=es[e])&&void 0!==t?t:e};function eh(e){return e?new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}).format(new Date(e)):"Unknown date"}var em=n(4272),eg=n(3781),ep=n(2407),ey=n(6770),ef=n(6507),ev=n(9214),ex=n(3081);let ew={anarch:"59648",criminal:"59649",shaper:"59650",haas_bioroid:"59651",jinteki:"59652",nbn:"59653",weyland_consortium:"59654",adam:"59655",apex:"59656",sunny_lebeau:"59657",neutral:"59658",neutral_runner:"59658",neutral_corp:"59658",credit:"59659","recurring-credit":"59660",click:"59661",subroutine:"59662",trash:"59663",trash_cost:"59664",link:"59665",mu:"59666",unknown:"59667","agenda-points":"59668",interrupt:"59669",hq:"59670","r&d":"59671",archives:"59672"},eb={Anarch:"anarch",Criminal:"criminal",Shaper:"shaper",HB:"haas_bioroid",Jinteki:"jinteki",NBN:"nbn",Weyland:"weyland_consortium",Adam:"adam",Apex:"apex",Sunny:"sunny_lebeau",_Neutral:"neutral"};function eS(e){var t,n,a;let{opened:i,onClose:l,onExitComplete:o,title:s,value:u,highlight:d,cardRect:c}=e;if((0,N.useEffect)(()=>{if(!i)return;let e=e=>{"Escape"===e.key&&l()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i,l]),"undefined"==typeof document)return null;let h=Math.min(400,(null===(t=window)||void 0===t?void 0:t.innerWidth)*.9||400),m=((null===(n=window)||void 0===n?void 0:n.innerWidth)||800)/2-h/2,g=((null===(a=window)||void 0===a?void 0:a.innerHeight)||600)/2-140,p=function(e){if(!e)return null;let t=ed(eu(e));if(!t)return null;let n=eb[t];if(!n)return null;let r=ew[n];return r?String.fromCharCode(parseInt(r,10)):null}(d.identity),y=function(e){if(!e)return"gray";let t=ed(eu(e));return t&&ec(t)||"gray"}(d.identity);return(0,ex.createPortal)((0,r.jsx)(ev.N,{onExitComplete:o,children:i&&c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:l,style:{position:"fixed",inset:0,backdropFilter:"blur(8px)",zIndex:1e3}}),(0,r.jsxs)(R.P.div,{initial:{top:c.top,left:c.left,width:c.width,height:c.height},animate:{top:g,left:m,width:h,height:280},exit:{top:c.top,left:c.left,width:c.width,height:c.height},transition:{duration:.3,ease:"easeOut"},style:{position:"fixed",background:"runner"===d.role?"#34161d":"#161d35",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:16,overflow:"hidden",zIndex:1001},children:[p&&(0,r.jsx)(R.P.span,{initial:{opacity:0},animate:{opacity:.05},exit:{opacity:0},transition:{duration:.3},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontFamily:"netrunner",fontSize:280,lineHeight:1,color:y,pointerEvents:"none"},children:p}),(0,r.jsx)("div",{style:{padding:"1rem"},children:(0,r.jsxs)(E.B,{gap:4,align:"center",children:[(0,r.jsx)(B.E,{c:"gray.5",fw:500,children:s}),(0,r.jsx)(P.h,{order:2,c:"white",children:u}),d.completedAt&&(0,r.jsx)(B.E,{size:"xs",c:"gray.6",children:eh(d.completedAt)})]})}),(0,r.jsxs)(R.P.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.15,duration:.2}},exit:{opacity:0,transition:{duration:.1}},children:[(0,r.jsx)(em.c,{color:"rgba(255, 255, 255, 0.1)"}),(0,r.jsxs)(E.B,{gap:"md",p:"lg",children:[(0,r.jsxs)(B.E,{size:"sm",c:"gray.4",lh:1.6,children:[d.identity&&(0,r.jsxs)(r.Fragment,{children:["You played as"," ",(0,r.jsx)(B.E,{span:!0,fw:600,c:"white",children:eu(d.identity)})]}),d.identity&&d.opponent&&" vs ",d.opponentIdentity&&(0,r.jsxs)(B.E,{span:!0,fw:600,c:"white",children:[eu(d.opponentIdentity),d.opponent&&(0,r.jsxs)(B.E,{span:!0,c:"gray.5",fw:400,children:[" ","(",d.opponent,")"]})]}),(d.identity||d.opponent)&&". ",d.turnCount&&(0,r.jsxs)(r.Fragment,{children:["The game took"," ",(0,r.jsxs)(B.E,{span:!0,fw:600,c:"white",children:[d.turnCount," turn",1===d.turnCount?"":"s"]})]}),d.turnCount&&d.reason&&" and ",(()=>{let e="win"===d.result?d.role:"loss"===d.result?"runner"===d.role?"corp":"runner":null,t=function(e,t){if(!e)return null;let n=e.trim().toLowerCase();return n.includes("agenda")?"runner"===t?"the runner stole enough agendas":"the corp scored enough agendas":n.includes("flatline")?"the runner was flatlined":n.includes("deck")?"runner"===t?"the corp ran out of cards":"the runner ran out of cards":"concede"===n||"conceded"===n?"runner"===t?"the corp conceded":"corp"===t?"the runner conceded":"a player conceded":n.includes("timeout")||n.includes("time")?"time ran out":e.toLowerCase()}(d.reason,e);return t&&(0,r.jsxs)(r.Fragment,{children:["ended when"," ",(0,r.jsx)(B.E,{span:!0,fw:600,c:"white",children:t})]})})(),(d.turnCount||d.reason)&&"."]}),d.replayUrl&&(0,r.jsxs)(eg.M,{href:d.replayUrl,target:"_blank",rel:"noopener noreferrer",size:"sm",c:"gray.5",style:{display:"inline-flex",alignItems:"center",gap:4},children:["Watch replay",(0,r.jsx)(ey.A,{size:14})]})]})]}),(0,r.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.15,duration:.15}},exit:{opacity:0,transition:{duration:.1}},style:{position:"absolute",top:12,right:12},children:(0,r.jsx)(ep.M,{variant:"subtle",color:"gray",onClick:l,children:(0,r.jsx)(ef.A,{size:18})})})]})]})}),document.body)}function eC(e){let{title:t,value:n,highlight:a,onExpand:i}=e,[l,o]=(0,N.useState)(!1),[s,u]=(0,N.useState)(!1),[d,c]=(0,N.useState)(null),h=(0,N.useRef)(null),m=!l&&!s,g=(0,r.jsx)(R.P.div,{ref:h,onClick:()=>{if(a&&h.current){let e=h.current.getBoundingClientRect();c({top:e.top,left:e.left,width:e.width,height:e.height}),o(!0),u(!0),null==i||i()}},style:{background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.15)",backdropFilter:"blur(8px)",cursor:a?"pointer":"default",minWidth:160,textAlign:"center",borderRadius:16,padding:"1rem",opacity:+!!m},whileHover:a?{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}:void 0,children:(0,r.jsxs)(E.B,{gap:4,align:"center",children:[(0,r.jsx)(B.E,{c:"gray.5",fw:500,children:t}),(0,r.jsx)(P.h,{order:2,c:"white",children:n}),(null==a?void 0:a.completedAt)&&(0,r.jsx)(B.E,{size:"xs",c:"gray.6",children:eh(a.completedAt)})]})});return a?(0,r.jsxs)(r.Fragment,{children:[g,(0,r.jsx)(eS,{opened:l,onClose:()=>{o(!1)},onExitComplete:()=>{u(!1)},title:t,value:n,highlight:a,cardRect:d})]}):g}function ek(e){let{items:t}=e,[n,a]=(0,N.useState)(!1),[i,l]=(0,N.useState)(!1),o=(0,N.useRef)(null),s=(0,G.W)(o,{amount:.5}),u=(0,N.useCallback)(()=>{n||(a(!0),l(!1))},[n]);(0,N.useEffect)(()=>{if(!s||n)return;let e=setTimeout(()=>{n||l(!0)},1e4);return()=>clearTimeout(e)},[s,n]);let d=t.filter(e=>null!==e.highlight).sort((e,t)=>{var n,r;return((null===(n=e.highlight)||void 0===n?void 0:n.completedAt)?new Date(e.highlight.completedAt).getTime():0)-((null===(r=t.highlight)||void 0===r?void 0:r.completedAt)?new Date(t.highlight.completedAt).getTime():0)});return 0===d.length?null:(0,r.jsxs)("div",{ref:o,children:[(0,r.jsx)(D.F,{slideSize:"auto",slideGap:"md",withControls:!0,controlSize:32,plugins:[(0,I.J)()],emblaOptions:{dragFree:!0,align:"center",containScroll:!1},styles:{root:{width:"100%"},viewport:{overflowY:"visible"},container:{overflowY:"visible"},control:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white"}},children:d.map(e=>(0,r.jsx)(D.F.Slide,{style:{paddingTop:8,paddingBottom:32},children:(0,r.jsx)(eC,{...e,onExpand:u})},e.title))}),(0,r.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:i&&!n?1:0},transition:{duration:.5},style:{marginTop:-16,textAlign:"center"},children:(0,r.jsx)(B.E,{size:"md",c:"gray.6",children:"Click the cards to expand"})})]})}var eA=n(4392);function eM(e){let{dot:t,dotSize:n,initialX:a,initialY:i,onRef:l}=e;return(0,r.jsx)(eA.m,{label:(0,r.jsxs)(r.Fragment,{children:[t.completedAt&&(0,r.jsxs)(r.Fragment,{children:[new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}).format(new Date(t.completedAt))," - "]}),t.identity," vs ",t.opponentIdentity," (",t.opponentName,") -"," ",(0,r.jsx)("span",{style:{color:t.isWin?"#4caf50":"#f44336"},children:t.isWin?"Win":"Loss"})]}),withArrow:!0,position:"top",children:(0,r.jsx)("div",{ref:e=>l(t.id,e),style:{position:"absolute",width:n,height:n,borderRadius:"50%",backgroundColor:t.color,cursor:"pointer",transform:"translate3d(".concat(a,"px, ").concat(i,"px, 0)")}})})}let ej=(0,N.memo)(function(e){let{games:t,username:n,scrollContainerRef:a}=e,i=Math.floor(54.81818181818182),l=8*i+(i-1)*3,o=(0,N.useRef)(null),s=(0,N.useRef)(null),u=(0,N.useRef)(0),d=(0,N.useRef)(new Map),c=["Here's all of those games.","Sorted by faction:","Or grouped by identity:"],h=(0,N.useCallback)((e,t)=>{t?d.current.set(e,t):d.current.delete(e)},[]),m=(0,N.useMemo)(()=>[...t].sort((e,t)=>e.completedAt&&t.completedAt?new Date(e.completedAt).getTime()-new Date(t.completedAt).getTime():0).map((e,t)=>{let r=e.runner.username===n,a=r?e.runner.identity:e.corp.identity,i=r?e.corp.identity:e.runner.identity,l=r?e.corp.username:e.runner.username,o=ed(eu(null!=a?a:void 0));return{id:t,color:ec(o),isWin:e.winner===(r?"runner":"corp"),identity:eu(null!=a?a:void 0),opponentIdentity:eu(null!=i?i:void 0),opponentName:null!=l?l:"Unknown",completedAt:e.completedAt,faction:o}}),[t,n]),g=(0,N.useMemo)(()=>[...m].sort((e,t)=>eo.indexOf(e.faction)-eo.indexOf(t.faction)),[m]),p=(0,N.useMemo)(()=>[...m].sort((e,t)=>{let n=eo.indexOf(e.faction),r=eo.indexOf(t.faction);return n!==r?n-r:e.identity.localeCompare(t.identity)}),[m]),y=(0,N.useMemo)(()=>{let e=[];return m.forEach((t,n)=>{let r=Math.floor(n/i),a=n%i;e[t.id]={x:11*a,y:11*r}}),e},[m,i,8,3]),f=(0,N.useMemo)(()=>{let e=[];return g.forEach((t,n)=>{let r=Math.floor(n/i),a=n%i;e[t.id]={x:11*a,y:11*r}}),e},[g,i,8,3]),{identityPositions:v,clusterHeight:x}=(0,N.useMemo)(()=>{let e=new Map;p.forEach(t=>{let n=e.get(t.identity)||[];n.push(t),e.set(t.identity,n)});let t=Array.from(e.keys()),n=t.length,r=Math.max(1,Math.ceil(Math.sqrt(1.5*n))),a=Math.ceil(n/r),i=800/r,o=Math.min(100,i),s=e=>{let t=1e4*Math.sin(9999*e);return t-Math.floor(t)},u=[],d=(800-l)/2;return t.forEach((t,n)=>{let a=Math.floor(n/r),l=n%r*i+i/2,c=a*o+o/2;(e.get(t)||[]).forEach((e,t)=>{let n=1e3*e.id+t,r=s(n)*Math.PI*2,a=30*s(n+1)*Math.sqrt(s(n+2));u[e.id]={x:l+Math.cos(r)*a-d,y:c+Math.sin(r)*a}})}),{identityPositions:u,clusterHeight:a*o}},[p,l]);(0,N.useEffect)(()=>{let e=null==a?void 0:a.current;if(!e||!o.current)return;let t=()=>{let t=o.current;if(!t)return;let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();if(n.bottom<r.top||n.top>r.bottom)return;let a=Math.max(0,Math.min(1,-(n.top-r.top)/(t.offsetHeight-e.clientHeight))),i=Math.min(1,2*a),l=Math.max(0,(a-.5)*2);if(d.current.forEach((e,t)=>{var n,r;let a=y[t],o=f[t],s=v[t];if(!a||!o||!s)return;let u=(n=a.x,n+(o.x-n)*i),d=(r=a.y,r+(o.y-r)*i),c=u+(s.x-u)*l,h=d+(s.y-d)*l;e.style.transform="translate3d(".concat(c,"px, ").concat(h,"px, 0)")}),s.current){let e=l>.5?2:+(i>.5);if(u.current!==e){let t=e>u.current;u.current=e,s.current.style.transition="none",s.current.style.opacity="0",s.current.style.transform=t?"translateY(20px)":"translateY(-20px)",s.current.textContent=c[e],s.current.offsetHeight,s.current.style.transition="opacity 0.2s ease-out, transform 0.2s ease-out",s.current.style.opacity="1",s.current.style.transform="translateY(0)"}}};return e.addEventListener("scroll",t,{passive:!0}),t(),()=>{e.removeEventListener("scroll",t)}},[a,y,f,v]);let w=Math.ceil(m.length/i),b=Math.max(8*w+(w-1)*3,x);return(0,r.jsxs)("div",{ref:o,style:{height:"300vh",position:"relative",background:"linear-gradient(145deg, #0a0a0a, #1a1a2e)"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:0,height:"1px",scrollSnapAlign:"start",scrollSnapStop:"always"}}),(0,r.jsx)("div",{style:{position:"absolute",top:"100vh",height:"1px",scrollSnapAlign:"start",scrollSnapStop:"always"}}),(0,r.jsx)("div",{style:{position:"absolute",bottom:0,height:"1px",scrollSnapAlign:"end",scrollSnapStop:"always"}}),(0,r.jsxs)("div",{style:{position:"sticky",top:0,height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem"},children:[(0,r.jsx)(P.h,{order:2,ta:"center",c:"gray.2",ref:s,children:c[0]}),(0,r.jsx)(W.a,{style:{position:"relative",width:l,height:b},children:m.map(e=>{let t=y[e.id];return(0,r.jsx)(eM,{dot:e,dotSize:8,initialX:t.x,initialY:t.y,onRef:h},e.id)})})]})]})}),eN=(0,N.memo)(function(e){let{rivals:t,totalUniqueOpponents:n,scrollContainerRef:a}=e,i=(0,N.useRef)(null),l=(0,N.useRef)(null),o=(0,N.useRef)(null),s=(0,N.useRef)(null),u=(0,N.useRef)(null),d=(0,N.useRef)([null,null,null]),c=(0,N.useRef)([null,null,null]),h=(0,N.useRef)(new Map),m=(0,N.useRef)(null),g=(0,N.useRef)(null),p=(0,N.useRef)(0),y=(0,N.useRef)(null),f=(0,N.useRef)(!1),v=(0,N.useMemo)(()=>[...t].sort((e,t)=>t.games-e.games).slice(0,3),[t]),x=(0,N.useMemo)(()=>new Set(v.map(e=>e.username)),[v]),w=(0,N.useMemo)(()=>(function(e,t){let n=[...e],r=t;for(let e=n.length-1;e>0;e--){let t=Math.floor((r=(9301*r+49297)%233280)/233280*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n})(t,t.length),[t]),b=57.2*Math.ceil(w.length/3),S=179.4,C=["You played against ".concat(n," different opponents this year."),"Here's your top 3 opponents:"],k=["(This is only some of them)"];(0,N.useEffect)(()=>{let e=g.current,t=u.current;if(!e||!t)return;let n=!1,r=()=>{p.current<=-b?p.current+=b:p.current>0&&(p.current-=b),e.style.transform="translateX(".concat(p.current,"px)")},a=performance.now(),i=e=>{if(!f.current&&!n){let t=(e-a)*.03;p.current-=t,r()}a=e,y.current=requestAnimationFrame(i)};y.current=requestAnimationFrame(i);let l=()=>{n=!0},o=e=>{if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)||e.shiftKey))return;n=!0,e.preventDefault(),e.stopPropagation();let t=0!==e.deltaX?e.deltaX:e.deltaY;p.current-=t,r()};return t.addEventListener("wheel",o,{passive:!1,capture:!0}),t.addEventListener("mouseenter",l),()=>{t.removeEventListener("wheel",o,{capture:!0}),t.removeEventListener("mouseenter",l),y.current&&cancelAnimationFrame(y.current)}},[b]),(0,N.useEffect)(()=>{let e=null==a?void 0:a.current;if(!e||!i.current)return;let t=null,n=0,r=0,g=()=>{t||(t=requestAnimationFrame(()=>{t=null;let a=i.current,g=s.current,p=u.current;if(!a||!g)return;let y=a.getBoundingClientRect(),x=e.getBoundingClientRect();if(y.bottom<x.top||y.top>x.bottom)return;let w=Math.max(0,Math.min(1,-(y.top-x.top)/(a.offsetHeight-e.clientHeight))),b=1-Math.pow(1-w,3);p&&(p.style.opacity=String(1-b),p.style.pointerEvents=w>0?"none":"auto");let S=g.getBoundingClientRect(),A=S.width/2,M=S.height/2,j=A-220;if(w>0&&0===r){f.current=!0;let e=[],t=S.left,n=S.right;v.forEach(r=>{let a=h.current.get("a-".concat(r.username)),i=h.current.get("b-".concat(r.username)),l=null,o=null;for(let e of[a,i]){if(!e)continue;let r=e.getBoundingClientRect(),a=r.left+r.width/2;if(a>=t&&a<=n){l=e,o=r;break}}if(!l){let e=(t+n)/2,r=1/0;for(let t of[a,i]){if(!t)continue;let n=t.getBoundingClientRect(),a=Math.abs(n.left+n.width/2-e);a<r&&(r=a,l=t,o=n)}}l&&o&&e.push({x:o.left-S.left,y:o.top-S.top})}),e.length===v.length&&(m.current=e)}0===w&&r>0&&(m.current=null,f.current=!1),r=w,d.current.forEach((e,t)=>{var n,r,a;if(!e)return;let i=null===(n=m.current)||void 0===n?void 0:n[t];if(!i&&w>0){let e=v[t],n=h.current.get("a-".concat(e.username)),r=h.current.get("b-".concat(e.username)),a=S.left,l=S.right,o=null;for(let e of[n,r]){if(!e)continue;let t=e.getBoundingClientRect(),n=t.left+t.width/2;if(n>=a&&n<=l){o=t;break}}if(!o){let e=(a+l)/2,t=1/0;for(let a of[n,r]){if(!a)continue;let n=a.getBoundingClientRect(),r=Math.abs(n.left+n.width/2-e);r<t&&(t=r,o=n)}}o&&(i={x:o.left-S.left,y:o.top-S.top},m.current||(m.current=[]),m.current[t]=i)}let l=null!==(r=null==i?void 0:i.x)&&void 0!==r?r:0,o=null!==(a=null==i?void 0:i.y)&&void 0!==a?a:M,s=[1,0,2][t],u=M-40-30;e.style.opacity=String(+(w>0)),e.style.transform="translate(".concat(l+(j+180*s-l)*b,"px, ").concat(o+((0===t?u-20:u+20)-o)*b,"px) scale(").concat(.65+.35*b,")");let d=v[t],c=h.current.get("a-".concat(d.username)),g=h.current.get("b-".concat(d.username));c&&(c.style.opacity=w>0?"0":"1",c.style.pointerEvents=w>0?"none":"auto"),g&&(g.style.opacity=w>0?"0":"1",g.style.pointerEvents=w>0?"none":"auto")});let N=Math.max(0,(w-.6)/.4);if(c.current.forEach(e=>{e&&(e.style.opacity=String(N))}),l.current&&o.current){let e=+(w>.3);if(n!==e){let t=e>n;n=e,l.current.style.transition="none",l.current.style.opacity="0",l.current.style.transform=t?"translateY(20px)":"translateY(-20px)",l.current.textContent=C[e],l.current.offsetHeight,l.current.style.transition="opacity 0.2s ease-out, transform 0.2s ease-out",l.current.style.opacity="1",l.current.style.transform="translateY(0)",o.current.style.transition="none",o.current.style.opacity="0",o.current.style.transform=t?"translateY(20px)":"translateY(-20px)",o.current.textContent=k[e],o.current.offsetHeight,o.current.style.transition="opacity 0.2s ease-out, transform 0.2s ease-out",o.current.style.opacity="1",o.current.style.transform="translateY(0)"}}}))};return e.addEventListener("scroll",g,{passive:!0}),g(),()=>{e.removeEventListener("scroll",g),t&&cancelAnimationFrame(t)}},[a,26,80,100,v,C,k]);let A=(0,N.useCallback)(e=>(0,r.jsx)("div",{style:{position:"relative",width:b,height:S,flexShrink:0},children:w.map((t,n)=>{let a=n%3,i=Math.floor(n/3),l=t.emailHash?"https://weavatar.com/avatar/".concat(t.emailHash,"?s=200&d=retro"):"https://weavatar.com/avatar/?s=200&d=retro",o=x.has(t.username),s="".concat(e,"-").concat(t.username);return(0,r.jsx)(eA.m,{label:(0,r.jsxs)(E.B,{gap:2,children:[(0,r.jsx)(B.E,{size:"sm",fw:600,children:t.username}),(0,r.jsxs)(B.E,{size:"xs",children:[t.games," games"]})]}),withArrow:!0,children:(0,r.jsx)("div",{ref:o?e=>{e?h.current.set(s,e):h.current.delete(s)}:void 0,style:{position:"absolute",left:57.2*i+28.6*(a%2==1),top:54.6*a},children:(0,r.jsx)("img",{src:l,alt:t.username,style:{width:52,height:52,borderRadius:7.090909090909091}})})},"".concat(e,"-").concat(t.username))})}),[w,b,S,3,57.2,52,26,x]);return(0,r.jsxs)("div",{ref:i,style:{height:"200vh",position:"relative",background:"linear-gradient(145deg, #1a1a2e, #4a1942)"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:0,height:"1px",scrollSnapAlign:"start",scrollSnapStop:"always"}}),(0,r.jsx)("div",{style:{position:"absolute",bottom:0,height:"1px",scrollSnapAlign:"end",scrollSnapStop:"always"}}),(0,r.jsxs)("div",{ref:s,style:{position:"sticky",top:0,height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:[(0,r.jsxs)(E.B,{gap:"xs",align:"center",style:{position:"absolute",top:"calc(50% - ".concat(S/2+24,"px)"),transform:"translateY(-100%)"},children:[(0,r.jsx)(P.h,{order:2,ta:"center",ref:l,children:C[0]}),(0,r.jsx)(P.h,{order:4,c:"gray.5",ta:"center",ref:o,children:k[0]})]}),(0,r.jsx)("div",{style:{position:"absolute",top:"50%",left:0,right:0,transform:"translateY(-50%)",width:"100vw",overflow:"hidden",willChange:"opacity"},ref:u,children:(0,r.jsxs)("div",{ref:g,style:{display:"flex",padding:"1rem 0",willChange:"transform"},children:[A("a"),A("b")]})}),v.map((e,t)=>{let n=e.emailHash?"https://weavatar.com/avatar/".concat(e.emailHash,"?s=200&d=retro"):"https://weavatar.com/avatar/?s=200&d=retro";return(0,r.jsx)("div",{ref:e=>{d.current[t]=e},style:{position:"absolute",top:0,left:0,width:80,height:80,opacity:0,transformOrigin:"top left",willChange:"transform, opacity",pointerEvents:"none"},children:(0,r.jsx)("img",{src:n,alt:e.username,style:{width:"100%",height:"100%",borderRadius:10.909090909090908}})},"flying-".concat(e.username))}),v.map((e,t)=>{let n=-180+180*[1,0,2][t];return(0,r.jsxs)("div",{ref:e=>{c.current[t]=e},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(calc(-50% + ".concat(n,"px), calc(-50% + ").concat(68+(0===t?-20:20)-30,"px))"),textAlign:"center",opacity:0,pointerEvents:"none",willChange:"opacity"},children:[(0,r.jsx)(B.E,{fw:600,size:"lg",c:"white",children:e.username}),(0,r.jsxs)(B.E,{size:"sm",c:"gray.4",children:[e.games," games"]})]},"detail-".concat(e.username))})]})]})});var eE=n(437),eB=n(7437);function eP(e){return(0,s.GP)((0,h.o)(e),"yyyy-MM-dd")}let eT=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function eR(e,t){if(0===e)return"rgba(255, 255, 255, 0.1)";let n=Math.min(e/Math.max(.5*t,1),1);return n<.25?"rgba(255, 255, 255, 0.25)":n<.5?"rgba(255, 255, 255, 0.45)":n<.75?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.95)"}let ez=(0,N.memo)(function(e){let{day:t,maxCount:n}=e;return(0,r.jsx)(eA.m,{label:(0,r.jsxs)(E.B,{gap:0,children:[(0,r.jsxs)(B.E,{size:"xs",fw:600,children:[t.count," ",1===t.count?"game":"games"]}),(0,r.jsx)(B.E,{size:"xs",c:"dimmed",children:t.date.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),withArrow:!0,position:"top",children:(0,r.jsx)("div",{style:{width:10,height:10,borderRadius:2,backgroundColor:eR(t.count,n),cursor:"pointer"}})})}),eD=(0,N.memo)(function(e){let{columns:t,yearStart:n,yearEnd:a,maxCount:i}=e;return(0,r.jsx)(r.Fragment,{children:t.map((e,t)=>(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2,marginLeft:6*!!e.isMonthStart},children:[Array.from({length:e.leadingSpacers}).map((e,t)=>(0,r.jsx)("div",{style:{width:10,height:10}},"spacer-lead-".concat(t))),e.days.map(e=>e.date>=n&&e.date<=a?(0,r.jsx)(ez,{day:e,maxCount:i},e.key):(0,r.jsx)("div",{style:{width:10,height:10}},e.key)),Array.from({length:e.trailingSpacers}).map((e,t)=>(0,r.jsx)("div",{style:{width:10,height:10}},"spacer-trail-".concat(t)))]},t))})});function eH(e){let{games:t,username:n,highlightRange:a}=e,{dailyCounts:i,yearStart:l,yearEnd:o,maxCount:s}=(0,N.useMemo)(()=>{let e=new Map,r=null,a=null;for(let l of t){var i;if(!l.completedAt||!m(l,n))continue;let t=new Date(l.completedAt),o=eP(t);e.set(o,(null!==(i=e.get(o))&&void 0!==i?i:0)+1),(!r||t<r)&&(r=t),(!a||t>a)&&(a=t)}let l=new Date,o=null!=r?r:new Date(l.getFullYear(),0,1),s=null!=a?a:new Date(l.getFullYear(),11,31),u=0;return e.forEach(e=>{e>u&&(u=e)}),{dailyCounts:e,yearStart:o,yearEnd:s,maxCount:u}},[t,n]),{columns:u,monthLabels:d}=(0,N.useMemo)(()=>{let e=[],t=[],n=new Date(l);n.setDate(n.getDate()-n.getDay());let r=new Date(o);r.setDate(r.getDate()+(6-r.getDay()));let a=new Date(n),s=[],u=0,d=-1;for(;a<=r;){var c;let n=eP(a),r=null!==(c=i.get(n))&&void 0!==c?c:0,o=a.getMonth(),h=a.getDay(),m=a>=l;o!==d&&-1!==d&&0!==h?(s.length>0&&e.push({days:s,leadingSpacers:u,trailingSpacers:7-u-s.length,isMonthStart:!1}),s=[],u=h,m&&t.push({label:eT[o],colIndex:e.length})):o!==d&&0===h&&m&&t.push({label:eT[o],colIndex:e.length}),d=o,s.push({date:new Date(a),count:r,key:n,dayOfWeek:h}),6===h&&(e.push({days:s,leadingSpacers:u,trailingSpacers:0,isMonthStart:e.length>0&&t.some(t=>t.colIndex===e.length)}),s=[],u=0),a.setDate(a.getDate()+1)}return s.length>0&&e.push({days:s,leadingSpacers:u,trailingSpacers:7-u-s.length,isMonthStart:!1}),e.forEach((e,n)=>{n>0&&t.some(e=>e.colIndex===n)&&(e.isMonthStart=!0)}),{columns:e,monthLabels:t}},[l,o,i]),c=e=>{let t=12*e;for(let r=0;r<e;r++){var n;(null===(n=u[r+1])||void 0===n?void 0:n.isMonthStart)&&(t+=6)}return t},g=(0,N.useMemo)(()=>{let e=[],t=0;return u.forEach(n=>{n.isMonthStart&&(t+=6),e.push(t),t+=12}),e},[u]),p=(0,N.useMemo)(()=>{if(!a)return[];let e=[];return u.forEach((t,n)=>{t.days.forEach((r,i)=>{if(r.date>=l&&r.date<=o&&(0,eB.v)((0,h.o)(r.date),{start:(0,h.o)(a.start),end:(0,h.o)(a.end)})){let a=t.leadingSpacers+i,l=g[n];e.push({day:r,colIndex:n,rowIndex:a,colOffset:l})}})}),e},[a,u,l,o,g]);return(0,r.jsx)(W.a,{style:{overflowX:"auto",maxWidth:"100%"},children:(0,r.jsxs)("div",{style:{display:"inline-block"},children:[(0,r.jsx)("div",{style:{display:"flex",marginBottom:4,height:14,position:"relative"},children:d.map((e,t)=>{let{label:n,colIndex:a}=e;return(0,r.jsx)(B.E,{size:"xs",c:"dimmed",style:{position:"absolute",left:c(a),fontSize:10},children:n},"".concat(n,"-").concat(t))})}),(0,r.jsxs)("div",{style:{display:"flex",position:"relative"},children:[(0,r.jsx)("div",{style:{display:"flex",gap:2,opacity:a?.15:1,transition:"opacity 0.2s ease"},children:(0,r.jsx)(eD,{columns:u,yearStart:l,yearEnd:o,maxCount:s})}),(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,pointerEvents:"none",opacity:a&&p.length>0?1:0,transition:"opacity 0.2s ease"},children:p.map(e=>{let{day:t,rowIndex:n,colOffset:a}=e;return(0,r.jsx)("div",{style:{position:"absolute",left:a,top:12*n,width:10,height:10,borderRadius:2,backgroundColor:eR(t.count,s),boxShadow:"0 0 2px 2px rgba(255, 255, 255, 0.1)"}},"highlight-".concat(t.key))})})]})]})})}function eI(e){let{label:t,value:n,subtitle:a,emptyMessage:i,highlightRange:l,onHighlight:o,isAnyHovered:s,isThisHovered:u}=e;return(0,r.jsx)(F.t,{p:"md",radius:16,style:{background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.15)",backdropFilter:"blur(8px)",cursor:n?"pointer":"default",opacity:s&&!u?.4:1,transition:"opacity 0.2s ease"},onMouseEnter:()=>l&&o(l),onMouseLeave:()=>o(null),children:(0,r.jsxs)(E.B,{gap:6,align:"center",children:[(0,r.jsx)(B.E,{fw:600,c:"gray.5",children:t}),n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.h,{order:2,c:"white",children:n}),a&&(0,r.jsx)(B.E,{size:"sm",c:"gray.6",ta:"center",children:a})]}):(0,r.jsx)(B.E,{size:"sm",c:"gray.6",children:i})]})})}function eF(e,t){let n=(0,s.GP)(e,"MMM d"),r=(0,s.GP)(t,"MMM d");return n===r?n:"".concat(n," – ").concat(r)}function eW(e,t){return"".concat(e," ").concat(1===e?t:t+"s")}function eL(e){var t;let{games:n,username:h}=e,[g,p]=(0,N.useState)(null),y=(0,N.useMemo)(()=>(function(e,t){let n=f(e,t);if(!n.length)return null;let r=1,i=1,l=n[0],o=n[0],s=n[0];for(let e=1;e<n.length;e++){let t=n[e-1],u=n[e];1===(0,a.m)(u,t)?i+=1:(i>r&&(r=i,l=s,o=t),i=1,s=u)}return i>r&&(r=i,l=s,o=n[n.length-1]),{days:r,start:l,end:o}})(n,h),[n,h]),x=(0,N.useMemo)(()=>(function(e,t){let n=f(e,t);if(n.length<2)return null;let r=0,l=n[0],o=n[0];for(let e=1;e<n.length;e++){let t=n[e-1],i=n[e],s=(0,a.m)(i,t)-1;s>r&&(r=s,l=t,o=i)}return r<=0?null:{days:r,start:(0,i.f)(l,1),end:(0,i.f)(o,-1)}})(n,h),[n,h]),w=(0,N.useMemo)(()=>(function(e,t){let n=function(e,t){let n=new Map;for(let a of e){var r;if(!a.completedAt||!m(a,t))continue;let e=v(a.completedAt);n.set(e,(null!==(r=n.get(e))&&void 0!==r?r:0)+1)}return n}(e,t);if(!n.size)return null;let r=null;for(let[e,t]of Array.from(n.entries()))(!r||t>r.games)&&(r={date:(0,l.qg)(e,"yyyy-MM-dd",new Date),games:t});return r})(n,h),[n,h]),b=(0,N.useMemo)(()=>(function(e,t){let n=new Map;for(let r of e){if(!r.completedAt||!m(r,t))continue;let e=new Date(r.completedAt),a=(0,o.k)(e,{weekStartsOn:0}),i=(0,s.GP)(a,"yyyy-MM-dd"),l=n.get(i);l?l.games+=1:n.set(i,{weekStart:a,games:1})}if(!n.size)return null;let r=null;for(let e of Array.from(n.values()))(!r||e.games>r.games)&&(r={weekStart:e.weekStart,games:e.games});return r?{weekStart:r.weekStart,weekEnd:(0,u.$)(r.weekStart,{weekStartsOn:0}),games:r.games}:null})(n,h),[n,h]),S=(0,N.useMemo)(()=>(function(e,t){let n=new Map;for(let r of e){if(!r.completedAt||!m(r,t))continue;let e=new Date(r.completedAt),a=(0,d.w)(e),i=(0,s.GP)(a,"yyyy-MM"),l=n.get(i);l?l.games+=1:n.set(i,{monthStart:a,games:1})}if(!n.size)return null;let r=null;for(let e of Array.from(n.values()))(!r||e.games>r.games)&&(r={monthStart:e.monthStart,games:e.games});return r?{monthStart:r.monthStart,monthEnd:(0,c.p)(r.monthStart),games:r.games}:null})(n,h),[n,h]),C=[{label:"Busiest day",value:w?eW(w.games,"game"):null,subtitle:w?"on ".concat((t=w.date,(0,s.GP)(t,"MMM d"))):null,emptyMessage:"No dated games available.",highlightRange:w?{start:w.date,end:w.date}:null,onHighlight:p},{label:"Busiest week",value:b?eW(b.games,"game"):null,subtitle:b?eF(b.weekStart,b.weekEnd):null,emptyMessage:"No dated games available.",highlightRange:b?{start:b.weekStart,end:b.weekEnd}:null,onHighlight:p},{label:"Busiest month",value:S?eW(S.games,"game"):null,subtitle:S?(0,s.GP)(S.monthStart,"MMMM"):null,emptyMessage:"No dated games available.",highlightRange:S?{start:S.monthStart,end:S.monthEnd}:null,onHighlight:p},{label:"Longest streak",value:y?eW(y.days,"day"):null,subtitle:y?eF(y.start,y.end):null,emptyMessage:"Not enough games yet.",highlightRange:y?{start:y.start,end:y.end}:null,onHighlight:p},{label:"Longest drought",value:x?eW(x.days,"day"):null,subtitle:x?eF(x.start,x.end):null,emptyMessage:"No breaks detected yet.",highlightRange:x?{start:x.start,end:x.end}:null,onHighlight:p}];return(0,r.jsx)(z,{gradient:"linear-gradient(145deg, #1a3a2e, #0d4a3e)",children:(0,r.jsxs)(E.B,{gap:"lg",align:"center",children:[(0,r.jsx)(P.h,{order:2,ta:"center",children:"Are you a grinder? You tell me."}),(0,r.jsx)(eH,{games:n,username:h,highlightRange:g}),(0,r.jsx)(eE.r,{cols:{base:1,sm:3},style:{width:"100%",maxWidth:800},children:C.map(e=>(0,r.jsx)(eI,{...e,isAnyHovered:null!==g,isThisHovered:null!==g&&null!==e.highlightRange&&g.start.getTime()===e.highlightRange.start.getTime()&&g.end.getTime()===e.highlightRange.end.getTime()},e.label))})]})})}function eG(){return(0,r.jsx)(z,{children:(0,r.jsxs)(E.B,{align:"center",gap:"sm",children:[(0,r.jsx)(P.h,{order:1,ta:"center",children:"Credits"}),(0,r.jsx)(P.h,{order:4,ta:"center",children:"(aka spiderbro's soapbox)"}),(0,r.jsx)(B.E,{size:"lg",ta:"center",children:"Card images and faction icons from NetrunnerDB."}),(0,r.jsx)(B.E,{size:"lg",ta:"center",children:"Thank you to the jinteki.net devs for building an amazing platform for helping this community to thrive online. Thank you to Lucy for the original JNet Stats Lab, and for providing reassurance that there's “no monopoly on good ideas”. Thank you to my team, MoM, for poking around this site before its official release and providing feedback. Go team!"}),(0,r.jsxs)(B.E,{size:"lg",ta:"center",children:["I can't thank everyone enough for supporting The Maker's Eye. It's an honor to be a part of the Netrunner community, and I'm glad I can contribute to it in some small way. I hope your ",e1," was as rewarding as mine was. Be safe, be kind to yourselves and one another (yes, that means you, jnet #general), and see you in the new year!"]})]})})}var eO=n(2048);function eJ(e){let{username:t,gravatarUrl:n,onReset:a}=e,[i,l]=(0,N.useState)(!1);return(0,N.useEffect)(()=>{let e=setTimeout(()=>{l(!0)},1e4);return()=>clearTimeout(e)},[]),(0,r.jsxs)(z,{gradient:"radial-gradient(circle, #0c0b1d, #02010a)",children:[(0,r.jsxs)(E.B,{align:"center",gap:"sm",children:[(0,r.jsxs)(P.h,{order:1,ta:"center",size:64,style:{lineHeight:1.05},children:["Hey, ",null!=t?t:"Welcome back","."]}),(0,r.jsxs)(B.E,{size:"xl",ta:"center",children:["Welcome to your Jnet Wrapped ",e1,"."]}),n&&(0,r.jsx)("img",{src:n,alt:"".concat(t,"'s avatar"),style:{width:100,height:100,borderRadius:"13.6%"}})]}),(0,r.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:+!!i},transition:{duration:.5},style:{position:"absolute",bottom:32,left:"50%",transform:"translateX(-50%)"},children:(0,r.jsxs)(E.B,{align:"center",gap:"xs",children:[(0,r.jsx)(B.E,{size:"sm",c:"gray.6",ta:"center",children:"Scroll or arrow down to continue"}),(0,r.jsx)(eO.A,{color:"gray",style:{width:"20px",height:"20px"}})]})})]})}var e_=n(2674),eU=n(7135);function eY(e){let{username:t,gravatarUrl:n,gradient:a,topRunners:i,topCorps:l,totalGames:o,totalMinutes:s,getCardImageForIdentity:u}=e,d=(0,N.useRef)(null),[c,h]=(0,N.useState)(!1),m=async()=>{if(d.current&&!c){h(!0);try{let e=d.current,n=await (0,eU.Tf)(e,{scale:3}),r=new Image;r.src=n,await new Promise(e=>r.onload=e);let a=document.createElement("canvas");a.width=.5*r.width,a.height=.5*r.height;let i=a.getContext("2d");i&&(i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(r,0,0,a.width,a.height));let l=a.toDataURL("image/png"),o=document.createElement("a");o.download="".concat(t,"-jnet-wrapped-").concat(e1,".png"),o.href=l,o.click()}catch(e){console.error("Failed to export image:",e)}finally{h(!1)}}};return(0,r.jsxs)(z,{gradient:"linear-gradient(145deg, #1a1a1a, #0a0a0a)",children:[(0,r.jsx)(P.h,{order:2,ta:"center",mb:"md",children:"And finally, a nice image for socials."}),(0,r.jsxs)(E.B,{align:"center",gap:"md",children:[(0,r.jsxs)("div",{ref:d,style:{padding:"1.5rem",background:a,borderRadius:16,display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},children:[(0,r.jsxs)("div",{style:{fontSize:"2rem",fontWeight:700,color:"white"},children:[t,"'s ",e1]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[(0,r.jsx)("div",{style:{position:"relative",width:480,height:190},children:i.slice(0,5).map((e,t)=>{let n=[{rotate:0,x:0,y:-18,z:5,width:138},{rotate:-8,x:-84,y:-14,z:3,width:120},{rotate:8,x:84,y:-14,z:3,width:120},{rotate:-16,x:-168,y:0,z:1,width:120},{rotate:16,x:168,y:0,z:1,width:120}],a=n[t]||n[2];return(0,r.jsx)("img",{src:u(e.identity),alt:eu(e.identity),style:{position:"absolute",width:a.width,borderRadius:"4.19%/3%",left:"50%",top:"50%",transform:"translate(-50%, -50%) translateX(".concat(a.x,"px) translateY(").concat(a.y,"px) rotate(").concat(a.rotate,"deg)"),zIndex:a.z,boxShadow:"0 4px 12px rgba(0,0,0,0.4)"}},e.identity)})}),(0,r.jsx)("div",{style:{position:"relative",width:480,height:190},children:l.slice(0,5).map((e,t)=>{let n=[{rotate:0,x:0,y:-18,z:5,width:138},{rotate:-8,x:-84,y:-14,z:3,width:120},{rotate:8,x:84,y:-14,z:3,width:120},{rotate:-16,x:-168,y:0,z:1,width:120},{rotate:16,x:168,y:0,z:1,width:120}],a=n[t]||n[2];return(0,r.jsx)("img",{src:u(e.identity),alt:eu(e.identity),style:{position:"absolute",width:a.width,borderRadius:"4.19%/3%",left:"50%",top:"50%",transform:"translate(-50%, -50%) translateX(".concat(a.x,"px) translateY(").concat(a.y,"px) rotate(").concat(a.rotate,"deg)"),zIndex:a.z,boxShadow:"0 4px 12px rgba(0,0,0,0.4)"}},e.identity)})})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",gap:"1rem"},children:[(0,r.jsxs)("div",{style:{width:120},children:[(0,r.jsx)("div",{style:{fontSize:"2rem",fontWeight:700,color:"white",lineHeight:1,margin:0},children:o.toLocaleString()}),(0,r.jsx)("div",{style:{fontSize:"1rem",color:"rgba(255,255,255,0.7)"},children:"games played"})]}),n&&(0,r.jsx)("img",{src:n,alt:"".concat(t,"'s avatar"),style:{width:60,height:60,borderRadius:"13.6%"}}),(0,r.jsxs)("div",{style:{width:120,textAlign:"right"},children:[(0,r.jsx)("div",{style:{fontSize:"2rem",fontWeight:700,color:"white",lineHeight:1,margin:0},children:s.toLocaleString()}),(0,r.jsx)("div",{style:{fontSize:"1rem",color:"rgba(255,255,255,0.7)"},children:"minutes played"})]})]}),(0,r.jsx)("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)",marginTop:"0.5rem"},children:"Jnet Wrapped - The Maker's Eye"})]}),(0,r.jsx)(ep.M,{variant:"subtle",color:"white",size:"lg",onClick:m,loading:c,"aria-label":"Share",children:(0,r.jsx)(e_.A,{style:{width:"70%",height:"70%"}})})]})]})}let eV={Anarch:"linear-gradient(145deg, #4a2210, #e26b35)",Criminal:"linear-gradient(145deg, #0d2650, #194c9b)",Shaper:"linear-gradient(145deg, #1e3d1e, #4cb148)",HB:"linear-gradient(145deg, #2d1d4a, #8854b9)",Jinteki:"linear-gradient(145deg, #3d1520, #b14157)",NBN:"linear-gradient(145deg, #4d4510, #ffde00)",Weyland:"linear-gradient(145deg, #1e2b1e, #516751)",_Neutral:"linear-gradient(145deg, #2d2d2d, #4a4a4a)"};function eK(e){var t,n,a,i,l,o,s,u,d,c,h,f,v,x,w,b,S,M,j,R,D,H,I,F,W;let{summary:G,cacheWarning:O,onReset:J}=e,_=(0,N.useRef)(null),U=G.profile,[Y,V]=(0,N.useState)({});(0,N.useEffect)(()=>{et().then(V)},[]),(0,N.useEffect)(()=>{var e;window.scrollTo({top:0,left:0,behavior:"auto"}),null===(e=_.current)||void 0===e||e.scrollTo({top:0,left:0,behavior:"auto"})},[]);let K=G.aggregates,{start:q,end:X}=(0,N.useMemo)(()=>(function(e){if(!e.length)return{start:null,end:null};let t=e.map(e=>{var t;return null===(t=e.completedAt)||void 0===t?void 0:t.getTime()}).filter(e=>"number"==typeof e);if(!t.length)return{start:null,end:null};let n=Math.min(...t),r=Math.max(...t);return{start:new Date(n),end:new Date(r)}})(G.games),[G.games]);(0,N.useMemo)(()=>U?g(G.games,U.username,"runner"):null,[U,G.games]),(0,N.useMemo)(()=>U?g(G.games,U.username,"corp"):null,[U,G.games]);let Z="https://printing.sneakdoorbeta.net/zhCN/xlarge/35024.webp",ee=G.games.length,er=(0,N.useCallback)(e=>(function(e,t,n){if(!t)return n;if(e[t])return e[t];let r=en(t);for(let[t,n]of Object.entries(e))if(en(t)===r)return n;for(let[t,n]of Object.entries(e)){let e=en(t);if(e.includes(r)||r.includes(e))return n}return n})(Y,e,Z),[Y,Z]),{totalIdentities:ea,runnerIdentityCount:ei,corpIdentityCount:el}=(0,N.useMemo)(()=>{if(!U)return{totalIdentities:0,runnerIdentityCount:0,corpIdentityCount:0};let e=U.username,t=new Set,n=new Set;for(let r of G.games){if(r.runner.username===e&&r.runner.identity){let e=r.runner.identity.trim();e&&t.add(e)}if(r.corp.username===e&&r.corp.identity){let e=r.corp.identity.trim();e&&n.add(e)}}let r=new Set;return t.forEach(e=>r.add(e)),n.forEach(e=>r.add(e)),{totalIdentities:r.size,runnerIdentityCount:t.size,corpIdentityCount:n.size}},[U,G.games]),eo=(0,N.useMemo)(()=>U?p(G.games,U.username,"runner"):null,[U,G.games]),es=(0,N.useMemo)(()=>U?p(G.games,U.username,"corp"):null,[U,G.games]),eh=(0,N.useMemo)(()=>U?y(G.games,U.username,"runner",5):[],[U,G.games]),em=(0,N.useMemo)(()=>U?y(G.games,U.username,"corp",5):[],[U,G.games]);(0,N.useMemo)(()=>U?function(e,t){var n,r,a;let i=e.filter(e=>"number"==typeof e.turnCount&&m(e,t)).sort((e,t)=>{var n,r;return(null!==(n=t.turnCount)&&void 0!==n?n:0)-(null!==(r=e.turnCount)&&void 0!==r?r:0)});if(!i.length)return null;let l=i[0],o=m(l,t),s="runner"===o?"corp":"runner",u=null!==(n=l[s].username)&&void 0!==n?n:null,d=null!==(r=l[s].identity)&&void 0!==r?r:null,c=null!==(a=l.turnCount)&&void 0!==a?a:0,h="draw";return l.winner===o?h="win":l.winner&&l.winner!==o&&(h="loss"),{turnCount:c,role:o,opponent:u,opponentIdentity:d,completedAt:l.completedAt,result:h}}(G.games,U.username):null,[U,G.games]);let eg=(0,N.useMemo)(()=>U?function(e,t){let n=(e,t)=>e>t,r=(e,t)=>e<t,a=(e,t)=>e&&t&&!(t<=0)?e/t:null;return{mostShuffles:C(e,t,e=>e.shuffleCount&&e.shuffleCount>0?e.shuffleCount:null,n),mostShufflesRunner:C(e,t,(e,t,n)=>"runner"===n&&e.shuffleCount&&e.shuffleCount>0?e.shuffleCount:null,n),mostShufflesCorp:C(e,t,(e,t,n)=>"corp"===n&&e.shuffleCount&&e.shuffleCount>0?e.shuffleCount:null,n),mostClicksPerTurn:C(e,t,(e,t)=>a(e.clicksGained,t.turnCount),n),mostClicksPerTurnCorp:C(e,t,(e,t,n)=>"corp"===n?a(e.clicksGained,t.turnCount):null,n),leastClicksPerTurn:C(e,t,(e,t)=>a(e.clicksGained,t.turnCount),r),mostCreditsPerTurn:C(e,t,(e,t)=>a(e.creditsGained,t.turnCount),n),mostCreditsPerTurnCorp:C(e,t,(e,t,n)=>"corp"===n?a(e.creditsGained,t.turnCount):null,n),leastCreditsPerTurn:C(e,t,(e,t)=>a(e.creditsGained,t.turnCount),r),mostCardsPlayed:C(e,t,e=>e.cardsPlayed&&e.cardsPlayed>0?e.cardsPlayed:null,n),mostCardsPlayedRunner:C(e,t,(e,t,n)=>"runner"===n&&e.cardsPlayed&&e.cardsPlayed>0?e.cardsPlayed:null,n),mostCardsPlayedCorp:C(e,t,(e,t,n)=>"corp"===n&&e.cardsPlayed&&e.cardsPlayed>0?e.cardsPlayed:null,n),mostCardsRezzed:C(e,t,(e,t,n)=>"corp"===n&&e.cardsRezzed&&e.cardsRezzed>0?e.cardsRezzed:null,n),mostCardsDrawn:C(e,t,e=>e.cardsDrawn&&e.cardsDrawn>0?e.cardsDrawn:null,n),mostCardsDrawnRunner:C(e,t,(e,t,n)=>"runner"===n&&e.cardsDrawn&&e.cardsDrawn>0?e.cardsDrawn:null,n),mostCardsDrawnCorp:C(e,t,(e,t,n)=>"corp"===n&&e.cardsDrawn&&e.cardsDrawn>0?e.cardsDrawn:null,n),mostRuns:C(e,t,(e,t,n)=>"runner"===n&&e.runsStarted&&e.runsStarted>0?e.runsStarted:null,n),mostRunsPerClick:C(e,t,(e,t,n)=>{var r,a;if("runner"!==n)return null;let i=null!==(r=e.runsStarted)&&void 0!==r?r:0,l=null!==(a=e.clicksGained)&&void 0!==a?a:0;return i<=0||l<=0?null:i/l},n),mostUniqueAccesses:C(e,t,(e,t,n)=>{if("runner"!==n)return null;let r=t.runnerUniqueAccesses;return"number"!=typeof r||r<=0?null:r},n),mostDamage:C(e,t,(e,t,n)=>"corp"===n&&e.damageDone&&e.damageDone>0?e.damageDone:null,n),mostDamageTaken:C(e,t,(e,t,n)=>{var r;if("runner"!==n)return null;let a=null!==(r=t.corpStats.damageDone)&&void 0!==r?r:0;return a>0?a:null},n),mostDamageTakenWin:C(e,t,(e,t,n)=>{var r;if("runner"!==n||t.winner!==n)return null;let a=null!==(r=t.corpStats.damageDone)&&void 0!==r?r:0;return a>0?a:null},n),mostFakeCredits:C(e,t,e=>{var t,n;let r=null!==(t=e.creditsGained)&&void 0!==t?t:0,a=(null!==(n=e.creditsSpent)&&void 0!==n?n:0)-r;return a>0?a:null},n),mostFakeCreditsRunner:C(e,t,(e,t,n)=>{var r,a;if("runner"!==n)return null;let i=null!==(r=e.creditsGained)&&void 0!==r?r:0,l=(null!==(a=e.creditsSpent)&&void 0!==a?a:0)-i;return l>0?l:null},n),mostFakeCreditsPerTurn:C(e,t,(e,t)=>{var n,r;let i=null!==(n=e.creditsGained)&&void 0!==n?n:0,l=(null!==(r=e.creditsSpent)&&void 0!==r?r:0)-i;return l>0?a(l,t.turnCount):null},n),leastUniqueAccessesAgendaWin:C(e,t,(e,t,n)=>{var r;if("runner"!==n||t.winner!==n||!k(null!==(r=t.reason)&&void 0!==r?r:"").toLowerCase().includes("agenda"))return null;let a=t.runnerUniqueAccesses;return"number"!=typeof a||a<0?null:a},r),fewestCardsRezzedCorpWin:C(e,t,(e,t,n)=>{var r,a;if("corp"!==n||t.winner!==n||A(k(null!==(r=t.reason)&&void 0!==r?r:"")))return null;let i=null!==(a=e.cardsRezzed)&&void 0!==a?a:0;return i>=0?i:null},r),mostTagsTaken:C(e,t,(e,t,n)=>{var r;if("runner"!==n)return null;let a=null!==(r=e.tagsGained)&&void 0!==r?r:0;return a>0?a:null},n),leastRunsInWin:C(e,t,(e,t,n)=>{var r,a;if("runner"!==n||t.winner!==n||A(k(null!==(r=t.reason)&&void 0!==r?r:"")))return null;let i=null!==(a=e.runsStarted)&&void 0!==a?a:0;return i>=0?i:null},r),fastestFlatlineWin:C(e,t,(e,t,n)=>{var r;if("corp"!==n||t.winner!==n||!k(null!==(r=t.reason)&&void 0!==r?r:"").toLowerCase().includes("flatline"))return null;let a=t.turnCount;return"number"!=typeof a||a<=0?null:a},r),fastestAgendaWin:C(e,t,(e,t,n)=>{var r;if("runner"!==n||t.winner!==n||!k(null!==(r=t.reason)&&void 0!==r?r:"").toLowerCase().includes("agenda"))return null;let a=t.turnCount;return"number"!=typeof a||a<=0?null:a},r),leastCreditsSpentWin:C(e,t,(e,t,n)=>{var r,a;if(t.winner!==n||A(k(null!==(r=t.reason)&&void 0!==r?r:"")))return null;let i=null!==(a=e.creditsSpent)&&void 0!==a?a:0;return i>=0?i:null},r),mostExcessClicksRunner:C(e,t,(e,t,n)=>{var r,a;if("runner"!==n)return null;let i=null!==(r=e.clicksGained)&&void 0!==r?r:0,l=null!==(a=t.turnCount)&&void 0!==a?a:0;if(i<=0||l<=0)return null;let o=i-4*l;return o>0?o:null},n),mostExcessClicksCorp:C(e,t,(e,t,n)=>{var r,a;if("corp"!==n)return null;let i=null!==(r=e.clicksGained)&&void 0!==r?r:0,l=null!==(a=t.turnCount)&&void 0!==a?a:0;if(i<=0||l<=0)return null;let o=i-3*l;return o>0?o:null},n),longestGameRunner:C(e,t,(e,t,n)=>{if("runner"!==n)return null;let r=t.turnCount;return"number"!=typeof r||r<=0?null:r},n),longestGameCorp:C(e,t,(e,t,n)=>{if("corp"!==n)return null;let r=t.turnCount;return"number"!=typeof r||r<=0?null:r},n)}}(G.games,U.username):null,[U,G.games]),ep=(0,N.useMemo)(()=>U?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=new Map;for(let n of e){let e=m(n,t);if(!e)continue;let a="runner"===e?"corp":"runner",i=n[a].username;if(!i)continue;let l=r.get(i),o=n[a].emailHash,s=null!=l?l:{emailHash:null,wins:0,total:0};s.total+=1,n.winner===e&&(s.wins+=1),!s.emailHash&&o&&(s.emailHash=o),r.set(i,s)}return Array.from(r.entries()).map(e=>{let[t,n]=e;return{username:t,emailHash:n.emailHash,games:n.total,wins:n.wins,losses:n.total-n.wins,winRate:n.total?n.wins/n.total:0}}).sort((e,t)=>t.games-e.games).slice(0,n)}(G.games,U.username,200):[],[U,G.games]),ey=(0,N.useMemo)(()=>{if(!U)return 0;let e=new Set;for(let t of G.games){let n=t.runner.username===U.username,r=t.corp.username===U.username;n&&t.corp.username&&e.add(t.corp.username),r&&t.runner.username&&e.add(t.runner.username)}return e.size},[U,G.games]),ef=(0,N.useMemo)(()=>{let e=ep.filter(e=>e.games>=2);e.length<33&&(e=ep.slice(0,Math.max(e.length,33)));let t=e.length%3;if(0===t)return e;let n=ep.filter(t=>!e.includes(t)).slice(0,3-t);return[...e,...n]},[ep]),ev=(0,N.useMemo)(()=>{let e=eh[0],t=em[0],n=e?ed(eu(e.identity)):null,r=t?ed(eu(t.identity)):null,a=n?ec(n):"#1a1a3a",i=r?ec(r):"#0a0a14";return"linear-gradient(135deg in oklab, color-mix(in oklab, ".concat(a,", black 20%), color-mix(in oklab, ").concat(i,", black 20%))")},[eh,em]),ex=[{label:"total minutes in games",value:K.totalMinutes.toLocaleString()},{label:"average games per day",value:eZ(K.averageGamesPerDay)},{label:"average minutes per day",value:eZ(K.averageMinutesPerDay)}],ew=[{title:"Longest game",highlight:null!==(t=null==eg?void 0:eg.longestGameRunner)&&void 0!==t?t:null,formatValue:e=>eq(e,"turn"),emptyMessage:"No turn count data yet."},{title:"Most runs",highlight:null!==(n=null==eg?void 0:eg.mostRuns)&&void 0!==n?n:null,formatValue:e=>eq(e,"run"),emptyMessage:"No run data yet."},{title:"Least runs in a win",highlight:null!==(a=null==eg?void 0:eg.leastRunsInWin)&&void 0!==a?a:null,formatValue:e=>eq(e,"run"),emptyMessage:"No winning run data yet."},{title:"Most damage taken",highlight:null!==(i=null==eg?void 0:eg.mostDamageTaken)&&void 0!==i?i:null,formatValue:e=>"".concat(e," damage"),emptyMessage:"No damage taken yet."},{title:"Most tags taken",highlight:null!==(l=null==eg?void 0:eg.mostTagsTaken)&&void 0!==l?l:null,formatValue:e=>eq(e,"tag"),emptyMessage:"No tag data yet."},{title:"Most cards played",highlight:null!==(o=null==eg?void 0:eg.mostCardsPlayedRunner)&&void 0!==o?o:null,formatValue:e=>eq(e,"card"),emptyMessage:"No card play data yet."},{title:"Fastest agenda win",highlight:null!==(s=null==eg?void 0:eg.fastestAgendaWin)&&void 0!==s?s:null,formatValue:e=>eq(e,"turn"),emptyMessage:"No agenda wins yet."},{title:"Most cards drawn",highlight:null!==(u=null==eg?void 0:eg.mostCardsDrawnRunner)&&void 0!==u?u:null,formatValue:e=>eq(e,"card"),emptyMessage:"No card draw data yet."},{title:"Most unique accesses",highlight:null!==(d=null==eg?void 0:eg.mostUniqueAccesses)&&void 0!==d?d:null,formatValue:e=>eq(e,"card"),emptyMessage:"No access data yet."},{title:"Most fake credits",highlight:null!==(c=null==eg?void 0:eg.mostFakeCreditsRunner)&&void 0!==c?c:null,formatValue:e=>"".concat(e,"c"),emptyMessage:"No credit data yet."},{title:"Most excess clicks",highlight:null!==(h=null==eg?void 0:eg.mostExcessClicksRunner)&&void 0!==h?h:null,formatValue:e=>eq(e,"click"),emptyMessage:"No excess click data yet."}],eb=[{title:"Longest game",highlight:null!==(f=null==eg?void 0:eg.longestGameCorp)&&void 0!==f?f:null,formatValue:e=>eq(e,"turn"),emptyMessage:"No turn count data yet."},{title:"Most damage dealt",highlight:null!==(v=null==eg?void 0:eg.mostDamage)&&void 0!==v?v:null,formatValue:e=>"".concat(e," damage"),emptyMessage:"No damage data yet."},{title:"Fastest flatline win",highlight:null!==(x=null==eg?void 0:eg.fastestFlatlineWin)&&void 0!==x?x:null,formatValue:e=>"".concat(e," turns"),emptyMessage:"No flatline wins yet."},{title:"Most cards rezzed",highlight:null!==(w=null==eg?void 0:eg.mostCardsRezzed)&&void 0!==w?w:null,formatValue:e=>eq(e,"card"),emptyMessage:"No rez data yet."},{title:"Fewest cards rezzed in a win",highlight:null!==(b=null==eg?void 0:eg.fewestCardsRezzedCorpWin)&&void 0!==b?b:null,formatValue:e=>eq(e,"card"),emptyMessage:"No corp win data yet."},{title:"Most shuffles",highlight:null!==(S=null==eg?void 0:eg.mostShufflesCorp)&&void 0!==S?S:null,formatValue:e=>eq(e,"shuffle"),emptyMessage:"No shuffle data yet."},{title:"Most cards played",highlight:null!==(M=null==eg?void 0:eg.mostCardsPlayedCorp)&&void 0!==M?M:null,formatValue:e=>eq(e,"card"),emptyMessage:"No card play data yet."},{title:"Most credits/turn",highlight:null!==(j=null==eg?void 0:eg.mostCreditsPerTurnCorp)&&void 0!==j?j:null,formatValue:e=>eX(e,"credit"),emptyMessage:"No credit data yet.",renderDetails:e$},{title:"Most clicks/turn",highlight:null!==(R=null==eg?void 0:eg.mostClicksPerTurnCorp)&&void 0!==R?R:null,formatValue:e=>eX(e,"click"),emptyMessage:"No click data yet.",renderDetails:e$},{title:"Most cards drawn",highlight:null!==(D=null==eg?void 0:eg.mostCardsDrawnCorp)&&void 0!==D?D:null,formatValue:e=>eq(e,"card"),emptyMessage:"No card draw data yet."},{title:"Most excess clicks",highlight:null!==(H=null==eg?void 0:eg.mostExcessClicksCorp)&&void 0!==H?H:null,formatValue:e=>eq(e,"click"),emptyMessage:"No excess click data yet."}],eS=(null==U?void 0:U.emailHash)?"https://weavatar.com/avatar/".concat(U.emailHash,"?s=200"):null,eC=[(0,r.jsx)(eJ,{username:null!==(I=null==U?void 0:U.username)&&void 0!==I?I:null,gravatarUrl:eS,onReset:J},"hero"),(0,r.jsx)(z,{children:(0,r.jsx)(E.B,{align:"center",gap:"sm",children:(0,r.jsx)(B.E,{size:"xl",ta:"center",children:"Let's get started, shall we?"})})},"intro"),(0,r.jsx)(z,{gradient:"linear-gradient(135deg, #1f1b52, #411858)",children:(0,r.jsxs)(E.B,{align:"center",gap:"lg",style:{width:"100%"},children:[(0,r.jsxs)(P.h,{order:2,ta:"center",children:["You played ",ee.toLocaleString()," games this year. That's..."]}),(0,r.jsx)(L,{stats:ex})]})},"summary-carousel"),U&&(0,r.jsx)(eL,{games:G.games,username:U.username},"streaks"),U&&(0,r.jsx)(ej,{games:G.games,username:U.username,scrollContainerRef:_},"game-dots"),U&&(0,r.jsx)(z,{gradient:"linear-gradient(145deg, #1a1a2e, #16213e)",children:(0,r.jsxs)(E.B,{align:"center",gap:"lg",children:[(0,r.jsxs)(P.h,{order:2,children:["You played ",ea," identities this year."]}),(0,r.jsxs)(P.h,{order:4,c:"gray.5",children:["(",ei," runners and ",el," corps, to be exact)"]}),(0,r.jsx)(P.h,{order:2,children:"But of course, you had your favorites."})]})},"identities"),eo&&(0,r.jsx)(Q,{initialGradient:"#000000",gradient:null!==(F=eV[ed(eu(eo.identity))])&&void 0!==F?F:eV._Neutral,title:"Your favorite runner was...",imageSrc:er(eo.identity),cardTitle:"Runner MVP",cardSubtitle:"Tap to flip",coverContent:(0,r.jsx)($,{}),coverMask:"/wrapped/assets/cardback/mask-white-on-transparent.png",revealTitle:"".concat(eu(eo.identity),"!"),revealSubtitle:"(".concat(eo.games," games)")},"favoriteRunner"),es&&(0,r.jsx)(Q,{initialGradient:"#000000",gradient:null!==(W=eV[ed(eu(es.identity))])&&void 0!==W?W:eV._Neutral,title:"Your go-to corp was...",imageSrc:er(es.identity),cardTitle:"Corp MVP",cardSubtitle:"Tap to flip",coverContent:(0,r.jsx)("img",{src:"/wrapped/assets/cardback/corp-back-2.png",alt:"Corp card back",style:{width:"100%",height:"100%",objectFit:"cover"}}),coverMask:"/wrapped/assets/cardback/corp-mask-2.png",revealTitle:"".concat(eu(es.identity),"!"),revealSubtitle:"(".concat(es.games," games)")},"favoriteCorp"),U&&eg&&(0,r.jsx)(z,{gradient:"linear-gradient(120deg, #4a2828, #5e2535)",children:(0,r.jsxs)(E.B,{gap:"lg",align:"center",children:[(0,r.jsx)(P.h,{order:2,children:"Some fun game records as runner."}),(0,r.jsx)(ek,{items:ew.map(e=>({title:e.title,value:e.highlight?e.formatValue(e.highlight.value):"—",highlight:e.highlight,color:"#06b6d4"}))})]})},"runner-highlights"),U&&eg&&(0,r.jsx)(z,{gradient:"linear-gradient(120deg, #28284a, #253560)",children:(0,r.jsxs)(E.B,{gap:"lg",align:"center",children:[(0,r.jsx)(P.h,{order:2,children:"And corp as well."}),(0,r.jsx)(ek,{items:eb.map(e=>({title:e.title,value:e.highlight?e.formatValue(e.highlight.value):"—",highlight:e.highlight,color:"#f43f5e"}))})]})},"corp-highlights"),U&&ef.length>0&&(0,r.jsx)(eN,{rivals:ef,totalUniqueOpponents:ey,scrollContainerRef:_},"rivals"),U&&(0,r.jsx)(eY,{username:U.username,gravatarUrl:eS,gradient:ev,topRunners:eh,topCorps:em,totalGames:ee,totalMinutes:K.totalMinutes,getCardImageForIdentity:er},"summary"),(0,r.jsx)(eG,{},"credits")].filter(Boolean),eA=(0,N.useCallback)(e=>{let t=_.current;if(!t)return;let n=t.clientHeight||window.innerHeight;if(!n)return;let r=Math.round(t.scrollTop/n),a=Math.max(0,Math.min(eC.length-1,r+e));a!==r&&t.scrollTo({top:a*n,behavior:"smooth"})},[eC.length]);return(0,N.useEffect)(()=>{let e=e=>{let t=e.target;(null==t||!t.closest("input, textarea, select, button, [contenteditable='true'], [role='textbox']"))&&("ArrowDown"!==e.key&&"PageDown"!==e.key&&(" "!==e.key||e.shiftKey)?("ArrowUp"===e.key||"PageUp"===e.key||" "===e.key&&e.shiftKey)&&(e.preventDefault(),eA(-1)):(e.preventDefault(),eA(1)))};return window.addEventListener("keydown",e,{passive:!1}),()=>window.removeEventListener("keydown",e)},[eA]),(0,r.jsxs)("div",{ref:_,style:{backgroundColor:"#0a0a14",height:"100vh",overflowY:"auto",overflowX:"hidden",scrollSnapType:"y mandatory",scrollBehavior:"smooth",overscrollBehavior:"none",overscrollBehaviorY:"none",WebkitOverflowScrolling:"touch"},children:[O&&(0,r.jsx)("div",{style:{position:"sticky",top:0,zIndex:20,padding:"1.25rem 1rem 0.5rem"},children:(0,r.jsx)(T.F,{color:"yellow",radius:"md",title:"Cache unavailable",variant:"light",children:O})}),eC.map((e,t)=>(0,r.jsx)("div",{children:e},t))]})}function eq(e,t){let n=eQ(e,t);return"".concat(e," ").concat(n)}function eX(e,t){return"".concat(eZ(e)," ").concat(eQ(e,t),"/turn")}function eZ(e){return Number.parseFloat(e.toFixed(2)).toString()}function eQ(e,t){return 1e-6>Math.abs(e-1)?t:"".concat(t,"s")}function e$(e){var t;return(0,r.jsxs)(E.B,{gap:2,children:[(0,r.jsx)(B.E,{size:"xs",c:"dimmed",children:function(e){var t;let n="runner"===e.role?"Runner":"Corp",r=null!==(t=e.opponent)&&void 0!==t?t:"Unknown opponent";return"As ".concat(n," vs ").concat(r)}(e)}),e.turnCount&&(0,r.jsxs)(B.E,{size:"xs",c:"dimmed",children:[e.turnCount," turns"]}),e.completedAt&&(0,r.jsx)(B.E,{size:"xs",c:"dimmed",children:(t=e.completedAt,new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(t))})]})}let e0="uploads",e1=2025;async function e5(){let e=e=>new Promise(t=>setTimeout(t,e)),t=[],n=0;for(;;){let r="/profile/history?skip=".concat(n),a=await fetch(r,{credentials:"include"});if(!a.ok)break;let i=JSON.parse(await a.text());if(!Array.isArray(i)||0===i.length)break;t.push(...i),n+=i.length,await e(500)}let r=JSON.stringify(t);return new Promise((e,t)=>{e({content:r,fileName:"gameHistory.json"})})}async function e2(){try{let e=await new Promise((e,t)=>{if(!("indexedDB"in window)){t(Error("IndexedDB is not available in this environment."));return}let n=window.indexedDB.open("wrappedUploadCache",1);n.onupgradeneeded=()=>{let e=n.result;e.objectStoreNames.contains(e0)||e.createObjectStore(e0)},n.onsuccess=()=>e(n.result),n.onerror=()=>{var e;return t(null!==(e=n.error)&&void 0!==e?e:Error("Unable to open cache database."))}});await new Promise((t,n)=>{let r=e.transaction(e0,"readwrite");r.objectStore(e0).delete("latestUpload"),r.oncomplete=()=>{e.close(),t()},r.onerror=()=>{var t;e.close(),n(null!==(t=r.error)&&void 0!==t?t:Error("Failed to clear cached upload."))}})}catch(e){if(e instanceof Error&&/IndexedDB/.test(e.message))return;throw e}}function e4(){let[e,t]=(0,N.useState)(null),[n,i]=(0,N.useState)(null),[l,o]=(0,N.useState)(null),[s,u]=(0,N.useState)(null),[d,c]=(0,N.useState)(null),[h,g]=(0,N.useState)(null),[p,y]=(0,N.useState)(!1);if((0,N.useEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[]),(0,N.useEffect)(()=>{let e=!1;return(async()=>{try{var t;let n=await e5();if(!n||e)return;let r=function(e,t){let n=new Date(e1,0,1),r=(0,M.D)(n),i=(0,j.Q)(n);return{summary:function(e,t){var n,r,i,l,o,s,u,d;let c=function(e){let t;try{t=JSON.parse(e)}catch(e){throw Error("The uploaded file is not valid JSON.")}if(!Array.isArray(t))throw Error("game_history.json must contain an array of games.");return t.map(e=>(function(e){var t,n,r,a,i,l,o,s;let u=w(null!==(i=null==e?void 0:e["start-date"])&&void 0!==i?i:null==e?void 0:e["creation-date"]),d=w(null!==(o=null!==(l=null==e?void 0:e["end-date"])&&void 0!==l?l:null==e?void 0:e["start-date"])&&void 0!==o?o:null==e?void 0:e["creation-date"]),c=S(null==e?void 0:null===(n=e.stats)||void 0===n?void 0:null===(t=n.time)||void 0===t?void 0:t.elapsed),h=(null==e?void 0:e["has-replay"])===!0,m="string"==typeof(null==e?void 0:e.gameid)?e.gameid:null;return{winner:(s=null==e?void 0:e.winner,"runner"===s||"corp"===s)?e.winner:null,runner:x(null==e?void 0:e.runner),corp:x(null==e?void 0:e.corp),completedAt:d,startedAt:u,elapsedMinutes:"number"==typeof c?Math.max(0,c):null,format:"string"==typeof(null==e?void 0:e.format)?e.format.trim().toLowerCase():null,runnerUniqueAccesses:function(e){var t,n,r;let a=null==e?void 0:null===(r=e.stats)||void 0===r?void 0:null===(n=r.runner)||void 0===n?void 0:null===(t=n.access)||void 0===t?void 0:t["unique-cards"];return Array.isArray(a)?a.length:"number"==typeof a&&Number.isFinite(a)&&a>=0?Math.floor(a):null}(e),turnCount:function(e){if("number"==typeof e&&Number.isFinite(e)&&e>=0)return Math.floor(e);if("string"==typeof e){let t=Number(e);if(Number.isFinite(t)&&t>=0)return Math.floor(t)}return null}(null==e?void 0:e.turn),runnerStats:b(null==e?void 0:null===(r=e.stats)||void 0===r?void 0:r.runner,!1),corpStats:b(null==e?void 0:null===(a=e.stats)||void 0===a?void 0:a.corp,!0),reason:"string"==typeof(null==e?void 0:e.reason)?e.reason:null,replayUrl:h&&m?"https://jinteki.net/replay/".concat(m):null}})(e))}(e);((null==t?void 0:t.start)||(null==t?void 0:t.end))&&(s=c,u=null!==(n=null==t?void 0:t.start)&&void 0!==n?n:null,d=null!==(r=null==t?void 0:t.end)&&void 0!==r?r:null,c=s.filter(e=>!!e.runner.username&&!!e.corp.username&&!!e.completedAt&&(!u||!(e.completedAt<u))&&(!d||!(e.completedAt>d))));let h=function(e){var t,n,r,a,i;if(!e.length)return null;let l={runner:new Map,corp:new Map},o=new Map,s=new Map;for(let r of e)for(let e of["runner","corp"]){let a=r[e].username;if(!a)continue;let i=l[e];i.set(a,(null!==(t=i.get(a))&&void 0!==t?t:0)+1),o.set(a,(null!==(n=o.get(a))&&void 0!==n?n:0)+1),r[e].emailHash&&!s.has(a)&&s.set(a,r[e].emailHash)}let u=function(e){let t=null;for(let[n,r]of Array.from(e.entries()))(!t||r>t.count)&&(t={username:n,count:r});return t}(o);if(!u)return null;let d=0;for(let t of e)(t.runner.username===u.username||t.corp.username===u.username)&&(d+=1);return{username:u.username,emailHash:null!==(r=s.get(u.username))&&void 0!==r?r:null,runnerGames:null!==(a=l.runner.get(u.username))&&void 0!==a?a:0,corpGames:null!==(i=l.corp.get(u.username))&&void 0!==i?i:0,coverage:d/e.length,totalGames:e.length,matchedGames:d,unmatchedGames:e.length-d}}(c),g=function(e,t,n,r){if(!e.length||!t)return{totalMinutes:0,totalDays:0,activeDays:0,averageGamesPerDay:0,averageMinutesPerGame:0,averageMinutesPerDay:0};let i=e.filter(e=>null!==m(e,t)),l=i.reduce((e,t)=>!t.elapsedMinutes||t.elapsedMinutes<=0?e:e+t.elapsedMinutes,0),o=new Set(i.map(e=>e.completedAt).filter(e=>!!e).map(e=>v(e))).size,s=n&&r?(0,a.m)(r,n)+1:o,u=s?i.length/s:0,d=i.length?l/i.length:0;return{totalMinutes:l,totalDays:s,activeDays:o,averageGamesPerDay:u,averageMinutesPerGame:d,averageMinutesPerDay:s?l/s:0}}(c,null!==(i=null==h?void 0:h.username)&&void 0!==i?i:null,null!==(l=null==t?void 0:t.start)&&void 0!==l?l:null,null!==(o=null==t?void 0:t.end)&&void 0!==o?o:null);return{games:c,profile:h,aggregates:g}}(e,{start:r,end:i}),filterRange:{start:r,end:i},fileName:t}}(n.content,null!==(t=n.fileName)&&void 0!==t?t:"Cached upload");o(r.summary),u(r.filterRange),c(r.fileName),g(null)}catch(t){if(e)return;await e2(),g(t instanceof Error?"Cached data was unavailable and has been cleared: ".concat(t.message):"Cached data was unavailable and has been cleared.")}})(),()=>{e=!0}},[]),l)return(0,r.jsx)(eK,{summary:l,fileName:d,filterRange:s,cacheWarning:h,onReset:()=>{o(null),t(null),c(null),i(null),u(null),g(null),e2()}})}}}]);